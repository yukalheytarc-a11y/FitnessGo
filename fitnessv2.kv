<ClickableImage@ButtonBehavior+Image>:
WindowManager:
    id: window_manager

    WelcomeScreen:
    ButtonScreen:
    loginScreen:
    signupScreen:
    signupScreen2:
    signupScreen3:
    signupScreen4:
    signupScreen5:
    signupScreen6:
    SignupScreen7:
    dashboardScreen:
    CalorieCounterScreen:
    FoodLogScreen:
    CreatePostScreen:
    WorkoutLogScreen:
    ArticleLogScreen:
    ArticleHubScreen:
    ArticleDetailScreen:
    ExercisesHubScreen:
    ExerciseDetailScreen:
    ViewPostScreen:
    WorkoutProgramScreen:
    ProfileScreen:
    FAQSScreen:
    AIFitnessBuddyScreen:
    SignupTermsScreen:

    admin_loginScreen:
    AdminDashboardScreen:
    AdminReviewPostsScreen:
    ManageActiveAccountScreen:
    ManageViolatorsAccountScreen:
    ManageDeactivatedAccountScreen:
    admin_wellnesshubScreen:
    admin_articlesScreen:
    admin_wellnesshub_gainweightScreen:
    admin_wellnesshub_keepfitScreen:
    admin_wellnesshub_gainmusclesScreen:
    AdminWorkoutProgramScreen:


<WelcomeScreen>:
    name: "welcome_screen"
    id: welcome_screen

    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # White background
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: "logo.png"
            size_hint: None, None
            width: "200dp"
            height: "200dp"
            pos_hint: {"center_x": .5, "center_y": .6}

        MDLabel:
            text: "Fitness Go"
            font_style: "Display"
            role: "medium"
            halign: "center"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            pos_hint: {"center_x": .5, "center_y": .4}

        MDLoadingIndicator:
            id: indicator
            size_hint: None, None
            size: "100dp", "100dp"
            pos_hint: {"center_x": .5, "center_y": .2}

<ButtonScreen>:
    name: "button_screen"
    id: button_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "200dp"
        height: "200dp"
        pos_hint: {"center_x": .5, "center_y": .8}

    MDLabel:
        text: "Your Fitness Journey Starts Here.\n"
        font_style: "Headline"
        role: "large"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .5, "center_y": .5}

    MDLabel:
        text: "Log in as:"
        font_style: "Title"
        role: "large"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .5, "center_y": .4}

    MDButton:
        id: new_btn
        style: "elevated"
        theme_width: "Custom"
        height: "50dp"
        size_hint_x: .5
        pos_hint: {"center_x": .5, "center_y": .3}
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "login_screen"


        MDButtonText:
            id: new_text
            text: "Student"
            pos_hint: {"center_x": .5, "center_y": .5}

    MDButton:
        id: create_btn
        style: "elevated"
        theme_width: "Custom"
        height: "50dp"
        size_hint_x: .5
        pos_hint: {"center_x": .5, "center_y": .2}
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "admin_login_screen"

        MDButtonText:
            id: create_text
            text: "Admin"
            pos_hint: {"center_x": .5, "center_y": .5}


<loginScreen>:
    name: "login_screen"
    id: login_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "200dp"
        height: "200dp"
        pos_hint: {"center_x": .5, "center_y": .8}

    MDLabel:
        text: "Fitness Go"
        font_style: "Display"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .5, "center_y": .58}

    MDLabel:
        text: "Username: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .18, "center_y": .53}

    MDTextField:
        id: username_field
        mode: "outlined"
        size_hint_x: None
        width: "300dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .5, "center_y": .46}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        # âœ… canvas.after MUST come before child widgets
        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "account"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1   # green when unfocused
            icon_color_focus: 0, 0.8, 0, 1


    MDLabel:
        text: "Password: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .18, "center_y": .39}

    MDTextField:
        id: password_field
        mode: "outlined"
        size_hint_x: None
        width: "300dp"
        pos_hint: {"center_x": .5, "center_y": .32}
        password_mask: "â€¢"
        radius: [30, 30, 30, 30]
        password: True
        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDIconButton:
        id: login_eye_icon
        icon: "eye-off"
        size_hint: None, None
        size: "32dp", "32dp"
        pos_hint: {"center_x": 0.83, "center_y": 0.32} # ðŸ”‘ alignment fix
        theme_icon_color: "Custom"
        icon_color: 0, 0.639, 0, 1
        on_release:
            root.toggle_password_visibility(password_field, self)

    # Show Password Checkbox
    BoxLayout:
        size_hint_x: None
        width: "240dp"
        height: "40dp"
        pos_hint: {"center_x": .40, "center_y": .20}
        spacing: 10
        orientation: "horizontal"

        MDButton:
            style: "text"
            theme_text_color: "Custom"
            text_color: 0, 0.6, 0, 1
            halign: "left"
            valign: "middle"
            text_size: self.size
            on_release: root.open_forgot_password_dialog()

            pos_hint: {"center_x": .10, "center_y": .55}

            MDButtonText:
                text: "Forgot Password"

    MDButton:
        id: login_button
        style: "filled"
        pos_hint: {"center_x": .5, "center_y": .18}
        on_release:
            root.manager.transition.direction = "fade"
            root.login_user()

        MDButtonText:
            text: "Log In"

    MDButton:
        style: "outlined"
        pos_hint: {"center_x": .5, "center_y": .1}
        on_release:
            root.manager.transition.direction = "fade"
            root.open_signup()

        MDButtonText:
            text: "Create New Account"

<SignupTermsScreen>:
    name: "signup_terms_screen"
    id: signup_terms_screen
    md_bg_color: 0.96, 0.97, 0.96, 1

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(12)

        # =====================
        # TITLE (NOT SCROLLABLE)
        # =====================
        Label:
            text: "Terms & Conditions"
            font_size: "30sp"
            bold: True
            halign: "center"
            color: 0, 0.6, 0, 1
            size_hint_y: None
            height: self.texture_size[1] + dp(10)

        MDLabel:
            text: "Before creating an account, please read and accept our Terms and condition."
            halign: "center"
            font_size: "14sp"
            theme_text_color: "Custom"
            text_color: 0.2, 0.2, 0.2, 1
            size_hint_y: None
            height: self.texture_size[1]

        # =====================
        # SCROLLABLE TERMS ONLY
        # =====================
        ScrollView:
            do_scroll_x: False

            MDBoxLayout:
                orientation: "vertical"
                spacing: dp(10)
                padding: dp(4)
                size_hint_y: None
                height: self.minimum_height

                MDLabel:
                    text: "By using FitnessGo, you agree to:"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "1. Conditions of Use"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "By accessing this application, you confirm that you have read, understood, and agree to comply with these Terms and Conditions."
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "2. User Responsibilities"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "You agree to use the system responsibly and only for its intended purpose."
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "3. Content and Conduct"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "You must not post harmful or inappropriate content. Content may be reviewed."
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "4. Account Management"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "Repeated violations may result in account deactivation."
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "5. Data Privacy & Security"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    text: "Your personal information is collected and used only for system functionality, account management, and service improvement. Authorized administrators may access data strictly for moderation and system maintenance purposes."
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]

                MDBoxLayout:
                    orientation: "horizontal"
                    spacing: dp(10)
                    size_hint_y: None
                    height: dp(40)
                    padding: dp(10)
                    pos_hint: {"center_x": 0.5}


                    MDCheckbox:
                        id: terms_checkbox
                        size: dp(32), dp(32)
                        on_active: root.on_terms_checked(self.active)

                    MDLabel:
                        text: "I accept the Terms & Conditions"
                        valign: "middle"
                        theme_text_color: "Custom"
                        text_color: 0.2, 0.2, 0.2, 1

        # =======================
        # BOTTOM ACTION BUTTONS
        # =======================
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(70)
            spacing: dp(16)
            padding: dp(20)
            pos_hint: {"center_x": 0.5}
            adaptive_width: True

            MDButton:
                id: decline_btn
                style: "tonal"
                radius: [20, 20, 20, 20]
                on_release: root.decline_terms()

                MDButtonText:
                    text: "Decline"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            MDButton:
                id: accept_btn
                style: "tonal"
                radius: [20, 20, 20, 20]
                disabled: True


                on_release: root.accept_terms()

                MDButtonText:
                    text: "Accept"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1


<signupScreen>:
    name: "signup_screen"
    id: signup_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"


    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "Tell us more about yourself"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .80}

    MDLabel:
        text: "To give you better experience and result"
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .75}


    MDLabel:
        text: "Full Name: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .15, "center_y": .67}

    MDTextField:
        id: fullname_field
        mode: "outlined"                   # valid mode
        size_hint_x: None
        width: "320dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .60}

        md_bg_color: 0.98, 1, 0.98, 1      # light background
        line_color_normal: 0, 0, 0, 0      # hide KivyMD's own outline
        line_color_focus: 0, 0, 0, 0

        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1         # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDLabel:
        text: "Age: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .11, "center_y": .51}

    MDTextField:
        id: age_field
        mode: "outlined"
        size_hint_x: None
        width: "100dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .21, "center_y": .44}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    # GENDER SELECTION
    MDLabel:
        text: "Gender: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .43, "center_y": .51}

    BoxLayout:
        id: gender_box
        orientation: "horizontal"
        spacing: "5dp"
        size_hint: None, None
        width: "150dp"
        height: "65dp"
        pos_hint: {"center_x": .58, "center_y": .46}

        # FEMALE BUTTON
        MDButton:
            id: female_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            md_bg_color: 0.40, 0.84, 0.40, 1   # default gray
            on_release:
                male_btn.md_bg_color = 0.40, 0.84, 0.40, 1  # unselect other
                self.md_bg_color = 0, 0.7, 0, 1          # selected green
                root.selected_gender = "Female"

            MDButtonIcon:
                icon: "gender-female"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1

            MDButtonText:
                text: "Female"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1

        # MALE BUTTON
        MDButton:
            id: male_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                female_btn.md_bg_color = 0.40, 0.84, 0.40, 1  # unselect other
                self.md_bg_color = 0, 0.7, 0, 1            # selected green
                root.selected_gender = "Male"

            MDButtonIcon:
                icon: "gender-male"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1

            MDButtonText:
                text: "Male"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1

    MDLabel:
        text: "Weight: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .14, "center_y": .35}

    MDTextField:
        id: weight_field
        mode: "outlined"
        size_hint_x: None
        width: "90dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .21, "center_y": .28}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDLabel:
        text: "kg"
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .38, "center_y": .28}


    MDLabel:
        text: "Height: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .52, "center_y": .35}

    MDTextField:
        id: height_field
        mode: "outlined"
        size_hint_x: None
        width: "90dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .60, "center_y": .28}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDLabel:
        text: "cm"
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .77, "center_y": .28}

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.validate_and_continue()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "text"
        theme_text_color: "Custom"
        text_color: 0, 0.6, 0, 1
        halign: "center"
        valign: "middle"
        text_size: self.size
        pos_hint: {"center_x": .50, "center_y": .06}
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "login_screen"

        MDButtonText:
            text: "Already have an account?"


<signupScreen2>
    name: "signup_screen2"
    id: signup_screen2
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"


    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "What is your activity level?"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .80}

    BoxLayout:
        orientation: "vertical"
        spacing: "20dp"
        size_hint: None, None
        width: "420dp"
        height: "60dp"
        pos_hint: {"center_x": .75, "center_y": .33}

        # ACTIVE BUTTON
        MDButton:
            id: active_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            size_hint_x: None
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                active_btn.md_bg_color = 0, 0.7, 0, 1
                not_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                lightly_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                very_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_activitylevel = "Active"

            MDButtonText:
                text: "         Active          "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # NOT VERY ACTIVE BUTTON
        MDButton:
            id: not_active_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                not_active_btn.md_bg_color = 0, 0.7, 0, 1
                lightly_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                very_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_activitylevel = "Not Very Active"

            MDButtonText:
                text: " Not Very Active "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # LIGHTLY ACTIVE BUTTON
        MDButton:
            id: lightly_active_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                not_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                lightly_active_btn.md_bg_color = 0, 0.7, 0, 1
                very_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_activitylevel = "Lightly Active"

            MDButtonText:
                text: "   Lightly Active   "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # VERY ACTIVE BUTTON
        MDButton:
            id: very_active_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                not_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                lightly_active_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                very_active_btn.md_bg_color = 0, 0.7, 0, 1
                root.selected_activitylevel = "Very Active"

            MDButtonText:
                text: "     Very Active     "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

    MDButton:
        style: "tonal"
        halign: "center"
        pos_hint: {"center_x": .20, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "signup_screen"

        MDButtonText:
            text: "Back"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.validate_and_continue()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"

<signupScreen3>
    name: "signup_screen3"
    id: signup_screen3
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "What is your goal?"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .83}

    BoxLayout:
        orientation: "vertical"
        spacing: "8dp"
        size_hint: None, None
        width: "420dp"
        height: "60dp"
        pos_hint: {"center_x": .75, "center_y": .43}

        # Lose weight  BUTTON
        MDButton:
            id: loss_weight_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            size_hint_x: None
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                loss_weight_btn.md_bg_color = 0, 0.7, 0, 1
                gain_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                keep_fit_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_muscles_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_goal = "Lose weight"

            MDButtonText:
                text: "     Lose weight     "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # Gain weight BUTTON
        MDButton:
            id: gain_weight_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                loss_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_weight_btn.md_bg_color = 0, 0.7, 0, 1
                keep_fit_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_muscles_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_goal = "Gain weight"

            MDButtonText:
                text: "     Gain weight      "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # Keep fit BUTTON
        MDButton:
            id: keep_fit_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                loss_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                keep_fit_btn.md_bg_color = 0, 0.7, 0, 1
                gain_muscles_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_goal = "Keep fit"

            MDButtonText:
                text: "         Keep Fit         "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # Gain muscles  BUTTON
        MDButton:
            id: gain_muscles_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                loss_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_weight_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                keep_fit_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                gain_muscles_btn.md_bg_color = 0, 0.7, 0, 1
                root.selected_goal = "Gain muscles "

            MDButtonText:
                text: "    Gain muscles    "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

    MDLabel:
        text: "Desired Weight: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .22, "center_y": .34}

    MDTextField:
        id: desired_weight_input
        mode: "outlined"
        size_hint_x: None
        width: "90dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .23, "center_y": .27}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1          # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDLabel:
        text: "kg"
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .38, "center_y": .27}

    MDButton:
        style: "tonal"
        halign: "center"
        pos_hint: {"center_x": .20, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "signup_screen2"

        MDButtonText:
            text: "Back"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.validate_and_continue()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"

<signupScreen4>
    name: "signup_screen4"
    id: signup_screen4
    selected_healthconditions: []
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"


    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "Do you have any health conditions?"
        font_style: "Title"
        role: "large"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .82}

    BoxLayout:
        orientation: "horizontal"
        spacing: "15dp"
        size_hint: None, None
        width: "420dp"
        height: "60dp"
        pos_hint: {"center_x": .75, "center_y": .73}

        # Yes BUTTON
        MDButton:
            id: yes_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            size_hint_x: None
            width: "420dp"
            md_bg_color: (0.902, 0.902, 0.902, 1)
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                yes_btn.md_bg_color = 0, 0.7, 0, 1
                no_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                root.selected_boolean_healthcondition = "Yes"

            MDButtonText:
                text: " Yes "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

        # No BUTTON
        MDButton:
            id: no_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [30, 30, 30, 30]
            width: "420dp"
            height: "60dp"
            md_bg_color: 0.40, 0.84, 0.40, 1   # default
            on_release:
                yes_btn.md_bg_color = 0.40, 0.84, 0.40, 1   # default
                no_btn.md_bg_color = 0, 0.7, 0, 1
                root.selected_boolean_healthcondition = "No"
                root.selected_healthconditions.clear()
                root.show_other_field = False


            MDButtonText:
                text: "  No  "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                font_style: "Headline"
                role: "small"

    MDBoxLayout:
        orientation: "vertical"
        spacing: "12dp"
        size_hint_y: None
        height: self.minimum_height
        opacity: 1 if root.selected_boolean_healthcondition == "Yes" else 0
        disabled: False if root.selected_boolean_healthcondition == "Yes" else True
        pos_hint: {"center_x": .50, "center_y": .42}

        MDLabel:
            text: "What health condition do you have?"
            font_style: "Title"
            role: "large"
            halign: "center"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            bold: True
            pos_hint: {"center_x": .50, "center_y": .65}

        BoxLayout:
            orientation: "vertical"
            spacing: "12dp"
            size_hint: None, None
            width: "420dp"
            height: self.minimum_height
            pos_hint: {"center_x": .73, "center_y": .40}

            # Heart Disease BUTTON
            MDButton:
                id: heart_disease_btn
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "420dp"
                height: "60dp"
                md_bg_color: 0.40, 0.84, 0.40, 1   # default
                on_release:
                    root.toggle_condition("heart_disease", heart_disease_btn)

                MDButtonText:
                    text: "     Heart Disease     "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Headline"
                    role: "small"

            # Asthma BUTTON
            MDButton:
                id: asthma_btn
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "420dp"
                height: "60dp"
                md_bg_color: 0.40, 0.84, 0.40, 1   # default
                on_release:
                    root.toggle_condition("Asthma", asthma_btn)

                MDButtonText:
                    text: "          Asthma           "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Headline"
                    role: "small"

            # Others BUTTON
            MDButton:
                id: others_btn
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "420dp"
                height: "60dp"
                md_bg_color: 0.40, 0.84, 0.40, 1   # default
                on_release:
                    root.toggle_condition("Others", others_btn)

                MDButtonText:
                    text: "           Others            "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Headline"
                    role: "small"

            # TEXTFIELD FOR "OTHER CONDITION"
            MDTextField:
                id: other_condition_input
                hint_text: "Please specify your condition"
                mode: "outlined"
                size_hint_x: None
                width: "245dp"
                radius: [30, 30, 30, 30]

                pos_hint: {"center_x": .29, "center_y": .22}
                opacity: 1 if root.show_other_field else 0
                disabled: False if root.show_other_field else True

                md_bg_color: 0.98, 1, 0.98, 1
                line_color_normal: 0, 0, 0, 0
                line_color_focus: 0, 0, 0, 0
                text_color_normal: 0, 0, 0, 1
                text_color_focus: 0, 0, 0, 1

                canvas.after:
                    Color:
                        rgba: 0, 0.8, 0, 1   # Green border
                    Line:
                        width: 2.5
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDButton:
        style: "tonal"
        halign: "center"
        pos_hint: {"center_x": .20, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "signup_screen3"

        MDButtonText:
            text: "Back"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.validate_and_continue()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"

<signupScreen5>
    name: "signup_screen5"
    id: signup_screen5
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"


    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "Create Your Profile"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .82}

    MDLabel:
        text: "Username: "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .19, "center_y": .76}

    MDTextField:
        id: username_field
        mode: "outlined"
        size_hint_x: None
        width: "320dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .69}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "account"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1   # green when unfocused
            icon_color_focus: 0, 0.8, 0, 1



    MDLabel:
        text: "Email: "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .15, "center_y": .61}

    MDTextField:
        id: email_field
        mode: "outlined"
        size_hint_x: None
        width: "320dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .54}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "email"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1   # green when unfocused
            icon_color_focus: 0, 0.8, 0, 1

    MDLabel:
        text: "Password: "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .18, "center_y": .46}

    MDTextField:
        id: password_field
        mode: "outlined"
        size_hint_x: None
        width: "320dp"
        password: True
        password_mask: "â€¢"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .39}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDIconButton:
        id: password_eye_icon
        icon: "eye-off"
        size_hint: None, None
        size: "32dp", "32dp"
        pos_hint: {"center_x": 0.85, "center_y": 0.39} # ðŸ”‘ alignment fix
        theme_icon_color: "Custom"
        icon_color: 0, 0.639, 0, 1
        on_release:
            root.toggle_password_visibility(password_field, self)

    MDLabel:
        text: "Confirm Password: "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .25, "center_y": .31}

    MDTextField:
        id: con_password_field
        mode: "outlined"
        size_hint_x: None
        width: "320dp"
        password: True
        password_mask: "â€¢"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .24}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDIconButton:
        id: confirm_password_eye_icon
        icon: "eye-off"
        size_hint: None, None
        size: "32dp", "32dp"
        pos_hint: {"center_x": 0.85, "center_y": 0.24} # ðŸ”‘ alignment fix
        theme_icon_color: "Custom"
        icon_color: 0, 0.639, 0, 1
        on_release:
            root.toggle_password_visibility(con_password_field, self)

    MDButton:
        style: "tonal"
        halign: "center"
        pos_hint: {"center_x": .20, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.manager.transition.direction = "fade"
            app.root.current = "signup_screen4"

        MDButtonText:
            text: "Back"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.validate_and_create_account()

        MDButtonText:
            text: "Sign Up"
            font_style: "Title"
            role: "large"

<signupScreen6>
    name: "signup_screen6"
    id: signup_screen6
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "Add Profile Photo"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .78}

    Image:
        id: profile_img
        source: "profile_default.png"
        size_hint: None, None
        width: "300dp"
        height: "300dp"
        pos_hint: {"center_x": .50, "center_y": .50}

    MDIconButton:
        icon: "plus"
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .78, "center_y": .28}

        on_release:
            root.manager.transition.direction = "fade"
            root.open_file_manager()



    MDButton:
        style: "tonal"
        halign: "center"
        pos_hint: {"center_x": .25, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.manager.transition.direction = "fade"
            root.skip_photo()

        MDButtonText:
            text: "Not now"
            font_style: "Title"
            role: "large"

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.save_profile_photo()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"

<SignupScreen7>
    name: "signup_screen7"
    id: signup_screen7
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    MDLabel:
        text: "Fitness Go"
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1

        pos_hint: {"center_x": .40, "center_y": .90}

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "80dp"
        height: "80dp"
        pos_hint: {"center_x": .12, "center_y": .92}

    MDLabel:
        text: "Congratulations!"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .82}

    MDLabel:
        text: "You have successfully created an account"
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .75}

    MDLabel:
        text: "Your daily net goal is"
        font_style: "Title"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .62}

    MDLabel:
        id: dailycaloriegoal_message
        text: ""
        font_style: "Headline"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        bold: True
        pos_hint: {"center_x": .50, "center_y": .55}

    MDLabel:
        text: "Your current BMI is"
        font_style: "Title"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .46}

    MDLabel:
        id: bmi_message
        text: ""
        font_style: "Headline"
        halign: "center"
        bold: True
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .40}

    MDLabel:
        id: bmi_status
        text: ""
        font_style: "Title"
        halign: "center"
        italic: True
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .35}

    MDLabel:
        text: "Trust the Process!"
        font_style: "Headline"
        role: "large"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .50, "center_y": .25}

    MDButton:
        style: "filled"
        halign: "center"
        pos_hint: {"center_x": .75, "center_y": .15}
        radius: [20, 20, 20, 20]
        on_release:
            root.go_to_dashboard()

        MDButtonText:
            text: "Continue"
            font_style: "Title"
            role: "large"


<dashboardScreen>:
    name: "dashboard_screen"
    id: dashboard_screen

    MDBoxLayout:
        orientation: "vertical"
        md_bg_color: 0.95, 0.95, 0.95, 1


        # ================= HEADER (like admin) =================
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: self.minimum_height
            padding: 15
            spacing: 20

            MDBoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: "40dp"
                spacing: "5dp"

                Image:
                    source: "logo.png"
                    size_hint: None, None
                    size: "40dp", "40dp"
                    pos_hint: {"center_y": 0.55}

                MDLabel:
                    text: "FitnessGo"
                    font_style: "Title"
                    bold: True
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1
                    size_hint_x: None
                    adaptive_width: True
                    size_hint_y: None
                    height: "40dp"
                    valign: "middle"

                Widget:
                    size_hint_x: 1

                ClickableImage:
                    id: top_profile_img
                    source: "profile_default.png"
                    size_hint: None, None
                    size: "40dp", "40dp"
                    pos_hint: {"x": .90 }
                    on_release: root.go_to_profile()

            FloatLayout:
                size_hint_y: None
                height: dp(35)

                MDLabel:
                    id: greeting_label
                    text: "Hi, User!"
                    font_style: "Title"
                    bold: True
                    text_color: 0, 0, 0, 1
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint: {"center_x": 0.5, "center_y": 0.78}

                MDLabel:
                    id: date_label
                    text: "Sunday, October 10"
                    role: "medium"
                    text_color: 0, 0, 0, 1
                    size_hint_y: None
                    height: self.texture_size[1]
                    size_hint_x: 1
                    pos_hint: {"center_x": 0.5, "center_y": 0.1}

# -------------------- CALORIE SUMMARY -------------------
        MDBoxLayout:
            spacing: 10
            padding: [15, 15, 15, 5]
            size_hint_y: None
            height: "90dp"

            MDCard:
                radius: 20
                padding: 10
                style: "outlined"

                canvas.after:
                    Color:
                        rgba: 0.1, 0.7, 0.1, 1
                    Line:
                        width: 2
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 20, 20, 20, 20)

                MDLabel:
                    id: calorie_intake
                    text: "Calorie Intake\n1300"
                    halign: "center"

            MDCard:
                radius: 20
                padding: 10
                style: "outlined"

                canvas.after:
                    Color:
                        rgba: 0.1, 0.7, 0.1, 1
                    Line:
                        width: 2
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 20, 20, 20, 20)

                MDLabel:
                    id: calorie_left
                    text: "Calorie Left\n1300"
                    halign: "center"


        # -------------------- FITNESS WALL TITLE ----------------
        Widget:
            size_hint_y: None
            height: dp(10)

        MDLabel:
            text: "Fitness Wall"
            halign: "left"
            font_size: "13sp"
            bold: True
            text_color: 0, 0.6, 0, 1
            size_hint_y: None
            height: dp(15)
            padding: [15, 0]

        # -------------------- POST INPUT ROW --------------------

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: None, None
            width: dp(330)       # â† MATCH POST CARD WIDTH
            height: dp(60)
            pos_hint: {"center_x": .5}
            spacing: dp(8)

            # --- PROFILE IMAGE ---
            ClickableImage:
                id: post_profile_img
                source: "profile_default.png"
                size_hint: None, None
                size: dp(50), dp(50)
                pos_hint: {"center_y": .5}
                on_release:
                    print("IMAGE TAPPED!")
                    root.go_to_view_post_screen()

            # --- INPUT BUTTON ---
            MDButton:
                style: "outlined"
                theme_width: "Custom"
                size_hint_y: None
                height: dp(50)       # â† MATCH IMAGE HEIGHT
                size_hint_x: 1
                pos_hint: {"center_y": .5}
                on_release: root.open_create_post()

                MDButtonText:
                    text: "What's on your mind?"

        # ================= FEED AREA (FIXED) ====================
        # IMPORTANT: do NOT compute height from root.height.
        # This prevents the jump after navigating screens.
        ScrollView:
            size_hint_y: 1
            do_scroll_x: False

            MDBoxLayout:
                id: feed_box
                orientation: "vertical"
                spacing: dp(10)
                padding: dp(12)
                size_hint_y: None
                height: self.minimum_height

        MDBoxLayout:
            size_hint_y: None
            height: "80dp"
            padding: 13
            md_bg_color: (0.902, 0.902, 0.902, 1)

            MDCard:
                size_hint: 1, None
                height: "70dp"
                radius: [30, 30, 30, 30]
                md_bg_color: 1, 1, 1, 1
                style: "outlined"
                line_color: 0, 0.6, 0, 1
                stroke_width: 2
                elevation: 0
                padding: [20, 8, 20, 8]

                MDBoxLayout:
                    spacing: 30
                    halign: "center"

                    # --- AI ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        MDIconButton:
                            icon: "robot"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                app.root.current = "ai_fitness_buddy_screen"

                        MDLabel:
                            text: "Fitness \nBuddy"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"

                    # --- Calorie Counter ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        MDIconButton:
                            icon: "food"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_calorie_counter()

                        MDLabel:
                            text: "Calorie Counter"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"

                    MDIconButton:
                        icon: "home"
                        style: "filled"
                        theme_bg_color: "Custom"
                        md_bg_color: 0, 0.6, 0, 1
                        theme_icon_size: "Custom"
                        icon_size: "9000dp"

                        size_hint: None, None
                        size: "60dp", "60dp"
                        on_release:
                            app.root.current = "dashboard_screen"

                    # --- ACTIVITY LOG ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        width: dp(80)

                        MDIconButton:
                            icon: "clipboard-text"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_food_log()

                        MDLabel:
                            text: "Activity \nLog"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            pos_hint: {"center_x": .5}
                            theme_font_size: "Custom"
                            font_size: "10sp"
                            size_hint_x: None
                            width: dp(60)      # â† give the text proper space

                    # --- WELLNESS HUB ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        width: dp(80)

                        MDIconButton:
                            icon: "spa"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_exercise_hub()

                        MDLabel:
                            text: "Wellness Hub"
                            pos_hint: {"center_x": .5}
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"
                            size_hint_x: None
                            width: dp(60)



<CreatePostScreen>:
    name: "create_post_screen"
    id: create_post_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"


        # ---------------- TOP BAR ----------------
        MDBoxLayout:
            id: top_bar
            size_hint_y: None
            height: "60dp"
            padding: [10, 10, 10, 10]
            md_bg_color: (0.902, 0.902, 0.902, 1)

            MDIconButton:
                icon: "arrow-left"
                icon_color: 0, 0, 0, 1
                on_release: root.go_back()


            MDLabel:
                text: "Create Post"
                bold: True
                halign: "center"
                text_color: 0, 0, 0, 1

            ClickableLabel:
                text: "Post"
                bold: True
                halign: "right"
                theme_text_color: "Custom"
                text_color: 0, 0.7, 0, 1
                size_hint_x: None
                width: "50dp"
                on_release: root.submit_post()

        # ---------------- USER SECTION ----------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "80dp"
            padding: [10, 5, 10, 0]
            spacing: 15

            # Profile Picture  (FIXED: added id)
            Image:
                id: createpost_profile_img
                source: "profile_default.png"
                size_hint: None, None
                size: "50dp", "50dp"
                radius: [25, 25, 25, 25]
                allow_stretch: True
                keep_ratio: True
                pos_hint: {"center_y": .7}

            # Name + Audience Selector
            MDBoxLayout:
                orientation: "vertical"
                spacing: 2

                # Name (FIXED: added id)
                MDLabel:
                    id: createpost_username
                    text: "User Name"
                    bold: True
                    halign: "left"
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1

                # AUDIENCE SELECTOR
                MDBoxLayout:
                    orientation: "horizontal"
                    size_hint_x: None
                    width: dp(120)
                    spacing: 3

                    MDLabel:
                        id: audience_label
                        text: root.audience_setting
                        role: "small"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        halign: "left"
                        size_hint: None, None
                        pos_hint: {"center_x": 0.2, "center_y": 1.2}

                    FloatLayout:
                        size_hint: None, None
                        size: "40dp", "40dp"

                        MDIconButton:
                            icon: "menu-down"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            size_hint: None, None
                            width: "18dp"
                            pos_hint: {"center_x": 0.10, "center_y": 1.2}
                            on_release:
                                root.open_audience_menu()

            # ================= SCROLLABLE BODY =================
        ScrollView:
            id: createpost_scroll
            size_hint_y: 1
            do_scroll_x: False

            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height   # â­ THIS IS THE PUSHER
                spacing: dp(12)
                padding: [10, 10, 10, 20]

                # --- TEXT + IMAGE CARD ---
                MDCard:
                    size_hint_x: 1
                    size_hint_y: None
                    height: self.minimum_height
                    radius: [30, 30, 30, 30]
                    padding: [12, 12, 12, 12]
                    md_bg_color: 0.90, 0.92, 0.88, 1
                    elevation: 0

                    MDBoxLayout:
                        orientation: "vertical"
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(12)

                        # âœï¸ TEXT INPUT
                        TextInput:
                            id: post_text
                            multiline: True
                            hint_text: "What's on your mind?"
                            background_color: 0, 0, 0, 0
                            foreground_color: 0, 0, 0, 1
                            hint_text_color: 0, 0, 0, .4
                            cursor_color: 0, 0, 0, 1
                            size_hint_y: None
                            height: max(self.minimum_height, dp(120))
                            padding: [14, 14, 14, 14]


                        # ðŸ–¼ IMAGE PREVIEW (FINAL)
                        Image:
                            id: preview_image
                            size_hint_y: None
                            height: 0
                            opacity: 1 if self.texture else 0
                            fit_mode: "contain"   # âœ… THIS FIXES EVERYTHING

                # --- IMAGE BUTTONS ---
                MDBoxLayout:
                    size_hint_y: None
                    height: "50dp"
                    spacing: dp(12)
                    padding: [10, 0, 0, 0]

                    MDIconButton:
                        icon: "image"
                        on_release: root.pick_image()

                    MDIconButton:
                        id: remove_photo_btn
                        icon: "close-circle"
                        theme_text_color: "Custom"
                        text_color: 1, 0, 0, 1
                        opacity: 0
                        disabled: True
                        on_release: root.remove_image()

        MDBoxLayout:
            size_hint_y: None
            height: "80dp"
            padding: 13
            md_bg_color: (0.902, 0.902, 0.902, 1)

            MDCard:
                size_hint: 1, None
                height: "70dp"
                radius: [30, 30, 30, 30]
                md_bg_color: 1, 1, 1, 1
                style: "outlined"
                line_color: 0, 0.6, 0, 1
                stroke_width: 2
                elevation: 0
                padding: [20, 8, 20, 8]

                MDBoxLayout:
                    spacing: 30
                    halign: "center"

                    # --- AI ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        MDIconButton:
                            icon: "robot"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                app.root.current = "ai_fitness_buddy_screen"

                        MDLabel:
                            text: "Fitness \nBuddy"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"

                    # --- Calorie Counter ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        MDIconButton:
                            icon: "food"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_calorie_counter()

                        MDLabel:
                            text: "Calorie Counter"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"

                    MDIconButton:
                        icon: "home"
                        style: "filled"
                        theme_bg_color: "Custom"
                        md_bg_color: 0, 0.6, 0, 1
                        theme_icon_size: "Custom"
                        icon_size: "9000dp"

                        size_hint: None, None
                        size: "60dp", "60dp"
                        on_release:
                            app.root.current = "dashboard_screen"

                    # --- ACTIVITY LOG ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        width: dp(80)

                        MDIconButton:
                            icon: "clipboard-text"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_food_log()

                        MDLabel:
                            text: "Activity \nLog"
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            pos_hint: {"center_x": .5}
                            theme_font_size: "Custom"
                            font_size: "10sp"
                            size_hint_x: None
                            width: dp(60)      # â† give the text proper space

                    # --- WELLNESS HUB ---
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 2
                        width: dp(80)

                        MDIconButton:
                            icon: "spa"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            on_release:
                                root.go_to_exercise_hub()

                        MDLabel:
                            text: "Wellness Hub"
                            pos_hint: {"center_x": .5}
                            halign: "center"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            theme_font_size: "Custom"
                            font_size: "10sp"
                            size_hint_x: None
                            width: dp(60)

<CalorieCounterScreen>
    name: "calorie_counter_screen"
    id: calorie_counter_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

    MDLabel:
        text: "Calorie Counter"
        font_style: "Headline"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": 0.5, "center_y": 0.92}
        bold: True

    Image:
        source: "logo.png"
        size_hint: None, None
        pos_hint: {"center_x": 0.11, "center_y": 0.93}
        width: "50dp"
        height: "50dp"

    MDLabel:
        text: "Keep track of your food intake"
        font_style: "Headline"
        role: "small"
        halign: "left"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .58, "center_y": .83}

    MDBoxLayout:
        orientation: "vertical"
        size_hint: None, None
        size: "145dp", "60dp"
        pos_hint: {"center_x": 0.26, "center_y": 0.72}
        md_bg_color: "#008000"
        padding: 10
        spacing: 10
        radius: [30, 30, 30, 30]   # rounded corners
        elevation: 0
        md_bg_color: ((0.172, 0.686, 0.161, 1))

        MDLabel:
            id: calorie_intake
            halign: "center"
            text: "Calorie Intake\n0  "
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1

    MDBoxLayout:
        orientation: "vertical"
        size_hint: None, None
        size: "145dp", "60dp"
        pos_hint: {"center_x": 0.73, "center_y": 0.72}
        md_bg_color: "#008000"
        padding: 10
        spacing: 10
        radius: [30, 30, 30, 30]   # rounded corners
        elevation: 0
        md_bg_color: ((0.172, 0.686, 0.161, 1))

        MDLabel:
            id: calorie_left
            halign: "center"
            text: "Calorie Left\n0  "
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1

    MDLabel:
        text: "Food Type: "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .19, "center_y": .63}

    MDTextField:
        id: foodtype
        mode: "outlined"
        size_hint_x: None
        width: "320dp"
        bold: True
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .50, "center_y": .56}

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1      # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "food"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1
            icon_color_focus: 0, 0.8, 0, 1

    MDLabel:
        text: "Food Quantity(g): "
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .24, "center_y": .48}


    MDTextField:
        id: foodweight
        mode: "outlined"
        size_hint_x: None
        width: "150dp"
        bold: True
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .28, "center_y": .41}

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1      # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "scale"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1
            icon_color_focus: 0, 0.8, 0, 1

    MDLabel:
        text: "Select Meal:"
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .67, "center_y": .48}


    MDTextField:
        id: selectmeal
        mode: "outlined"
        size_hint_x: None
        width: "150dp"
        bold: True
        readonly: True
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .73, "center_y": .41}
        on_focus:
            if self.focus: root.open_meal_dropdown(self)

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1      # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "menu-down"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1
            icon_color_focus: 0, 0.8, 0, 1

    # FOOD CALORIE (API result)
    MDLabel:
        text: "Food Calorie:"
        font_style: "Title"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .20, "center_y": .33}

    MDTextField:
        id: foodcalorie
        text: ""
        mode: "outlined"
        size_hint_x: None
        width: "150dp"
        bold: True
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .28, "center_y": .26}
        readonly: True         # prevents typing
        focus: False           # no focus/highlight
        disabled: True

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1      # green border
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    BoxLayout:
        id: action_box
        orientation: "vertical"
        spacing: "15dp"
        size_hint: None, None
        width: "180dp"
        height: "160dp"
        pos_hint: {"center_x": .80, "center_y": .28}

        # GET CALORIES BUTTON (Light Green)
        MDButton:
            id: get_calories_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [15, 15, 15, 15]
            md_bg_color: 0.40, 0.84, 0.40, 1   # light green (#66ff66)
            on_release:
                root.get_food_calories()


            MDButtonText:
                text: "Get Calories"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1  # white text

        # SAVE BUTTON (Dark Green)
        MDButton:
            id: save_btn
            style: "filled"
            theme_bg_color: "Custom"
            radius: [15, 15, 15, 15]
            md_bg_color: 0.0, 0.60, 0.0, 1   # darker green
            on_release:
                save_btn.md_bg_color = 0, 0.7, 0, 1          # selected â†’ dark green
                get_calories_btn.md_bg_color = 0.40, 0.84, 0.40, 1 # unselect â†’ light green
                root.save_food_entry()

            MDButtonIcon:
                icon: "content-save"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1

            MDButtonText:
                text: "   Save     "
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1  # white text

    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<FoodLogScreen>
    name: "food_log_screen"
    id: food_log_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

        # ------------------------------------
        # HEADER (Logo + Title)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 80

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Activity Log"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                pos_hint: {"center_x": 0.8}

        # ------------------------------------
        # CATEGORY BUTTONS (No Scroll)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(20)          # â†“ moves the row upward
            padding: dp(5), dp(0)   # â†“ removes bottom padding
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            # --- WORKOUTS ---
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release:
                    root.go_to_workout()

                MDButtonText:
                    text: "Workouts"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            # --- ARTICLES / STORIES ---
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release:
                    root.go_to_article()

                MDButtonText:
                    text: "Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            # --- FOOD (ACTIVE)
            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_food_log()

                MDButtonText:
                    text: "Food"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1


        # ------------------------------------
        # DATE SELECTOR BUTTON
        # ------------------------------------
        MDBoxLayout:
            size_hint_y: None
            height: "70dp"
            padding: 0, 10, 0, 0
            orientation: "vertical"
            spacing: 10

            MDLabel:
                text: "Calorie Intake Log"
                font_style: "Headline"
                role: "small"
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                halign: "center"
                valign: "middle"

            MDButton:
                id: fl_date_btn
                style: "filled"
                radius: [25, 25, 25, 25]
                md_bg_color: 0.0, 0.60, 0.0, 1
                size_hint_x: None
                width: fl_date_btn_text.texture_size[0] + dp(60)
                pos_hint: {"center_x": 0.5}
                on_release: root.show_date_picker()

                MDButtonText:
                    id: fl_date_btn_text
                    font_style: "Title"
                    text: "   Date   "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1


        # ------------------------------------
        # FOOD LOG LIST
        # ------------------------------------
        MDScrollView:
            size_hint_y: 1
            do_scroll_x: False
            do_scroll_y: True

            MDList:
                id: fl_container
                padding: [0, 0, 0, dp(90)]   # bottom padding so last item is visible
                spacing: dp(10)


    # ------------------------------------
    # BOTTOM NAVIGATION BAR
    # ------------------------------------
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<WorkoutLogScreen>
    name: "workout_log_screen"
    id: workout_log_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

        # ------------------------------------
        # HEADER (Logo + Title)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 80

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Activity Log"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                pos_hint: {"center_x": 0.8}

        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(20)          # â†“ moves the row upward
            padding: dp(5), dp(0)   # â†“ removes bottom padding
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            # --- WORKOUTS --- (ACTIVE)
            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release:
                    root.go_to_workout()

                MDButtonText:
                    text: "Workouts"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

            # --- ARTICLES---
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release:
                    root.go_to_article()

                MDButtonText:
                    text: "Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            # --- FOOD
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release: root.go_to_food_log()

                MDButtonText:
                    text: "Food"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

        # ------------------------------------
        # FOOD LOG LIST
        # ------------------------------------
        MDScrollView:
            size_hint_y: 1
            do_scroll_x: False
            do_scroll_y: True

            MDList:
                id: fl_container
                padding: [0, 0, 0, dp(90)]   # bottom padding so last item is visible
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height

    # ------------------------------------
    # BOTTOM NAVIGATION BAR
    # ------------------------------------
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<ArticleLogScreen>:
    name: "article_log_screen"
    id: article_log_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

        # ------------------------------------
        # HEADER (Logo + Title)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 80

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Activity Log"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                pos_hint: {"center_x": 0.8}

        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(20)          # â†“ moves the row upward
            padding: dp(5), dp(0)   # â†“ removes bottom padding
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            # --- WORKOUTS ---
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release:
                    root.go_to_workout()

                MDButtonText:
                    text: "Workouts"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            # --- ARTICLES / STORIES --- (ACTIVE)
            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release:
                    root.go_to_article()

                MDButtonText:
                    text: "Articles"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

            # --- FOOD
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release: root.go_to_food_log()

                MDButtonText:
                    text: "Food"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

        # FOOD LOG LIST
        MDScrollView:
            size_hint_y: 1
            do_scroll_x: False
            do_scroll_y: True

            MDList:
                id: saved_articles_container
                padding: [0, 0, 0, dp(90)]   # bottom padding so last item is visible
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height

    # BOTTOM NAVIGATION BAR
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "28dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<ArticleHubScreen>:
    name: "article_hub"
    id: article_hub
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

        # ------------------------------------
        # HEADER (Logo + Title)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 80

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                pos_hint: {"center_x": 0.3}

        # ------------------------------------
        # TOP TABS
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(20)
            padding: dp(5), dp(0)
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_article_hub()

                MDButtonText:
                    text: "Articles"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release: root.go_to_exercise_hub()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1



        # ====================================
        # SCROLLABLE ARTICLE CONTENT
        # ====================================
        MDScrollView:
            do_scroll_x: False

            MDBoxLayout:
                orientation: "vertical"
                padding: [dp(15), dp(10), dp(15), dp(90)]
                spacing: dp(20)
                size_hint_y: None
                height: self.minimum_height

                # ------------------------------------
                # FEATURED SECTION
                # ------------------------------------
                MDLabel:
                    text: "Posts for you"
                    font_style: "Title"
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1
                    size_hint_y: None
                    height: dp(28)

                ScrollView:
                    size_hint_y: None
                    height: dp(240)
                    do_scroll_y: False
                    do_scroll_x: True
                    scroll_type: ['bars']
                    bar_width: 0

                    MDBoxLayout:
                        id: featured_container
                        orientation: "horizontal"
                        spacing: dp(12)
                        size_hint_x: None
                        width: self.minimum_width
                        padding: [0, 0, dp(15), 0]

                MDLabel:
                    text: "All Articles"
                    font_style: "Title"
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1
                    size_hint_y: None
                    height: dp(28)

                MDBoxLayout:
                    id: popular_container
                    orientation: "vertical"
                    spacing: dp(12)
                    size_hint_y: None
                    height: self.minimum_height


    # ------------------------------------
    # BOTTOM NAVIGATION BAR
    # ------------------------------------
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<ArticleDetailScreen>:
    name: "article_detail_screen"
    md_bg_color: 1, 1, 1, 1


    MDBoxLayout:
        orientation: "vertical"
        padding: 0
        spacing: 0

        RelativeLayout:
            size_hint_y: None
            height: dp(260)

            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.45
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                id: ad_image
                source: "logo.png"
                allow_stretch: True
                keep_ratio: False

            MDIconButton:
                icon: "arrow-left"
                icon_color: 1, 1, 1, 1
                md_bg_color: 0.9, 0.9, 0.9, 0.35
                radius: [20, 20, 20, 20]
                size_hint: None, None
                size: "40dp", "40dp"
                pos_hint: {"x": 0.02, "top": 0.98}
                on_release: root.go_back()

            MDIconButton:
                id: save_btn
                icon: "bookmark-outline"
                icon_color: 1, 1, 1, 1
                md_bg_color: 0.9, 0.9, 0.9, 0.35
                radius: [20, 20, 20, 20]
                size_hint: None, None
                size: "40dp", "40dp"
                pos_hint: {"right": 0.97, "top": 0.98}
                on_release: root.save_article_from_detail()


        MDScrollView:
            do_scroll_x: False

            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: [20, 15, 20, 30]
                spacing: dp(8) #15

                MDLabel:
                    id: ad_category
                    text: ""
                    font_size: "12sp"
                    text_color: 0.7, 0.7, 0.7, 1
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1] + dp(3)

                MDLabel:
                    id: ad_title
                    text: ""
                    font_style: "Headline"
                    bold: True
                    text_color: 0, 0, 0, 1
                    size_hint_y: None
                    text_size: self.width, None
                    padding_y: 0 #2
                    halign: "left"
                    valign: "top"
                    height: self.texture_size[1]

                MDBoxLayout:
                    orientation: "horizontal"
                    size_hint_y: None
                    spacing: dp(5)

                    MDBoxLayout:
                        orientation: "vertical"

                        MDLabel:
                            id: ad_author
                            text: ""
                            font_size: "13sp"
                            text_color: 0.7, 0.7, 0.7, 1
                            size_hint_y: None
                            padding: [0, dp(6), 0, dp(5)] #20
                            text_size: self.width, None
                            height: self.texture_size[1] + dp(6) #25

                        MDLabel:
                            id: ad_date
                            text: ""
                            font_size: "11sp"
                            text_color: 0.7, 0.7, 0.7, 1
                            size_hint_y: None
                            text_size: self.width, None
                            height: self.texture_size[1] + dp(6)

                MDLabel:
                    id: ad_body
                    text: ""
                    font_size: "14sp"
                    text_color: 0, 0, 0, 1
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]
                    halign: "left"
                    valign: "top"
                    height: self.texture_size[1] + dp(20)


<WorkoutProgramScreen>:
    name: "workout_program_screen"
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"

        # ---------- TOP IMAGE ----------
        RelativeLayout:
            size_hint_y: None
            height: "180dp"

            FitImage:
                id: program_image
                source: ""
                allow_stretch: True
                keep_ratio: False
                size_hint: 1, 1
                radius: [0, 0, 30, 30]
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

            MDIconButton:
                icon: "arrow-left"
                theme_icon_color: "Custom"
                icon_color: 1, 1, 1, 1
                pos_hint: {"x": 0.02, "y": 0.70}
                on_release: app.root.current = "exercise_hub"

        # ----- SPACE between image and label -----
        Widget:
            size_hint_y: None
            height: dp(8)

        # ---------- PROGRAM TITLE LABEL ----------
        MDLabel:
            id: program_details
            text: ""
            font_style: "Title"
            halign: "left"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            bold: True
            padding: dp(15), dp(8)
            size_hint_y: None
            height: self.texture_size[1] + dp(16)

        # ----- SPACE between label and list -----
        Widget:
            size_hint_y: None
            height: dp(4)

        # ---------- EXERCISE LIST ----------
        MDScrollView:
            size_hint_y: 1
            do_scroll_x: False
            do_scroll_y: True

            MDList:
                id: fl_container
                padding: [0, 0, 0, dp(90)]   # bottom padding so last item is visible
                spacing: dp(10)           # space between cards

    # ------------------------------------
    # BOTTOM NAVIGATION BAR
    # ------------------------------------
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)

<ExercisesHubScreen>:
    name: "exercise_hub"
    id: exercise_hub
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 20

        # ------------------------------------
        # HEADER (Logo + Title)
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 80

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                pos_hint: {"center_x": 0.3}

        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(20)          # â†“ moves the row upward
            padding: dp(5), dp(0)   # â†“ removes bottom padding
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            # --- ARTICLES ---
            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                on_release:
                    root.go_to_article_hub()

                MDButtonText:
                    text: "Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            # --- EXERCISES --- (ACTIVE)
            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release:
                    root.go_to_exercise_hub()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

        # FOOD LOG LIST
        MDScrollView:
            size_hint_y: 1
            do_scroll_x: False
            do_scroll_y: True

            MDList:
                id: fl_container
                padding: [0, 0, 0, dp(90)]   # bottom padding so last item is visible
                spacing: dp(10)



    # BOTTOM NAVIGATION BAR
    MDBoxLayout:
        size_hint_y: None
        height: "80dp"
        padding: 13
        md_bg_color: (0.902, 0.902, 0.902, 1)

        MDCard:
            size_hint: 1, None
            height: "70dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0
            padding: [20, 8, 20, 8]

            MDBoxLayout:
                spacing: 30
                halign: "center"

                # --- AI ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "robot"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            app.root.current = "ai_fitness_buddy_screen"

                    MDLabel:
                        text: "Fitness \nBuddy"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                # --- Calorie Counter ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    MDIconButton:
                        icon: "food"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_calorie_counter()

                    MDLabel:
                        text: "Calorie Counter"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"

                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    theme_icon_size: "Custom"
                    icon_size: "9000dp"

                    size_hint: None, None
                    size: "60dp", "60dp"
                    on_release:
                        app.root.current = "dashboard_screen"

                # --- ACTIVITY LOG ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "clipboard-text"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_food_log()

                    MDLabel:
                        text: "Activity \nLog"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": .5}
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)      # â† give the text proper space

                # --- WELLNESS HUB ---
                BoxLayout:
                    orientation: "vertical"
                    spacing: 2
                    width: dp(80)

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        on_release:
                            root.go_to_exercise_hub()

                    MDLabel:
                        text: "Wellness Hub"
                        pos_hint: {"center_x": .5}
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        theme_font_size: "Custom"
                        font_size: "10sp"
                        size_hint_x: None
                        width: dp(60)


<ExerciseDetailScreen>:
    name: "exercise_detail_screen"
    id: exercise_detail_screen
    md_bg_color: 1, 1, 1, 1

    MDBoxLayout:
        orientation: "vertical"

        # ---------- TOP IMAGE ----------
        RelativeLayout:
            size_hint_y: None
            height: dp(260)

            # âš ï¸ canvas MUST be first
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.25
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                id: exercise_image
                source: ""
                allow_stretch: True
                keep_ratio: False

            # Back
            MDIconButton:
                icon: "arrow-left"
                theme_icon_color: "Custom"
                icon_color: 0.0, 0.45, 0.2, 1
                md_bg_color: 1, 1, 1, 0.9
                size_hint: None, None
                size: "40dp", "40dp"
                pos_hint: {"x": 0.02, "top": 0.98}
                on_release: root.go_back()

            # Favorite
            MDIconButton:
                id: exercise_heart_btn
                icon: "heart-outline"
                theme_icon_color: "Custom"
                icon_color: 0.0, 0.45, 0.2, 1
                md_bg_color: 1, 1, 1, 0.9
                size_hint: None, None
                size: "40dp", "40dp"
                pos_hint: {"right": 0.97, "top": 0.98}
                on_release: root.toggle_exercise_favorite()

        # ---------- CONTENT ----------
        MDScrollView:
            do_scroll_x: False

            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: dp(20)
                spacing: dp(14)

                MDLabel:
                    id: exercise_title
                    font_style: "Headline"
                    bold: True
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]

                MDLabel:
                    id: exercise_meaning
                    font_size: "14sp"
                    theme_text_color: "Secondary"
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1] + dp(10)

                MDLabel:
                    text: "Steps"
                    font_style: "Title"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    id: exercise_steps
                    font_size: "14sp"
                    theme_text_color: "Secondary"
                    line_height: 1.4
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1] + dp(10)

                MDLabel:
                    text: "Benefits"
                    font_style: "Title"
                    bold: True
                    size_hint_y: None
                    height: self.texture_size[1]

                MDLabel:
                    id: exercise_benefits
                    font_size: "14sp"
                    theme_text_color: "Secondary"
                    line_height: 1.4
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1] + dp(20)


<ViewPostScreen>:
    name: "view_post_screen"

    MDBoxLayout:
        orientation: "vertical"
        spacing: 0
        padding: 0
        md_bg_color: 1,1,1,1

        # BACK BUTTON
        MDBoxLayout:
            size_hint_y: None
            height: dp(35)

            MDIconButton:
                icon: "arrow-left"
                icon_color: 0, 0.6, 0, 1
                pos_hint: {"center_y": .5}
                on_release:
                    app.root.current = "dashboard_screen"

        # USER HEADER (MATCH WIDTH OF POST CARD)
        MDBoxLayout:
            size_hint: None, None
            width: dp(330)            # â† MATCH POST CARD SIZE
            height: dp(55)
            pos_hint: {"center_x": .5}
            spacing: dp(10)

            Image:
                id: header_profile
                size_hint: None, None
                size: dp(45), dp(45)
                radius: [25,25,25,25]
                allow_stretch: True
                keep_ratio: True
                pos_hint: {"center_y": .5}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 1

                MDLabel:
                    id: header_fullname
                    text: "User Full Name"
                    bold: True
                    font_size: "15sp"
                    text_color: 0, 0, 0, 1

                MDLabel:
                    id: header_date
                    text: "Thursday, Oct. 9"
                    font_size: "12sp"
                    text_color: .4,.4,.4,1

        Widget:
            size_hint_y: None
            height: dp(15)   # â† increase to move them lower

        # SEARCH BAR + FRIEND ICON (ONE ROW)
        MDBoxLayout:
            size_hint: None, None
            width: dp(330)          # â† EXACT MATCH with post card
            height: dp(40)
            pos_hint: {"center_x": .5}
            spacing: dp(8)


            # SEARCH BAR
            MDBoxLayout:
                padding: 10, 7
                spacing: 8

                # --- INPUT BUTTON ---
                MDButton:
                    style: "outlined"
                    theme_width: "Custom"
                    height: "45dp"
                    size_hint_x: 1
                    on_release: root.open_create_post()


                    MDButtonText:
                        text: "What's on your mind?"



        # ----------- ONLY THIS PART SCROLLABLE ----------- #
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                id: post_layout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(15)
                padding: [0, dp(20), 0, dp(20)]

<AdminReviewPostsScreen>:
    name: "admin_review_posts_screen"

    MDBoxLayout:
        orientation: "vertical"
        spacing: 0
        padding: 0
        md_bg_color: 1,1,1,1

        # BACK BUTTON
        MDBoxLayout:
            size_hint_y: None
            height: dp(35)

            MDIconButton:
                icon: "arrow-left"
                icon_color: 0, 0.6, 0, 1
                pos_hint: {"center_y": .5}
                on_release:
                    root.go_back()

        # USER HEADER (MATCH WIDTH OF POST CARD)
        MDBoxLayout:
            size_hint: None, None
            width: dp(330)            # â† MATCH POST CARD SIZE
            height: dp(55)
            pos_hint: {"center_x": .5}
            spacing: dp(10)

            Image:
                id: header_profile
                size_hint: None, None
                size: dp(45), dp(45)
                radius: [25,25,25,25]
                allow_stretch: True
                keep_ratio: True
                pos_hint: {"center_y": .5}

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 1

                MDLabel:
                    id: header_fullname
                    text: "User Full Name"
                    bold: True
                    font_size: "15sp"
                    text_color: 0, 0, 0, 1

                MDLabel:
                    id: header_date
                    text: "Thursday, Oct. 9"
                    font_size: "12sp"
                    text_color: .4,.4,.4,1

        Widget:
            size_hint_y: None
            height: dp(15)   # â† increase to move them lower


        # ----------- ONLY THIS PART SCROLLABLE ----------- #
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                id: post_layout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(15)
                padding: [0, dp(20), 0, dp(20)]

<ProfileScreen>:
    name: "profile_screen"
    id: profile_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"

        # ---------------- TOP BAR ----------------
        MDBoxLayout:
            id: top_bar
            size_hint_y: None
            height: "60dp"
            padding: [10, 10, 10, 10]
            md_bg_color: (0.902, 0.902, 0.902, 1)

            MDIconButton:
                icon: "arrow-left"
                icon_color: 0, 0, 0, 1
                on_release:
                    app.root.current = "dashboard_screen"

            MDLabel:
                text: "Profile"
                bold: True
                halign: "center"
                valign: "middle"
                text_color: 0, 0, 0, 1
                theme_font_size: "Custom"
                font_size: "22sp"
                size_hint_x: 1

            Widget:
                size_hint_x: None
                width: "45dp"

        # -------- IMAGE + NAME + BUTTON ROW --------
        MDBoxLayout:
            orientation: "horizontal"
            padding: [20, 30]
            spacing: 20
            size_hint_y: None
            height: "160dp"

            # --- Profile Image ---
            Image:
                id: user_profile_picture
                source: "profile_default.png"
                size_hint: None, None
                width: "135dp"
                height: "135dp"
                allow_stretch: True
                keep_ratio: True

            # --- RIGHT SIDE (NAME + BUTTON) ---
            MDBoxLayout:
                orientation: "vertical"
                spacing: 10
                size_hint_x: 1
                size_hint_y: None
                height: self.minimum_height
                padding: [0, 0, 0, 0]   # moves text & button upward

                MDLabel:
                    id: user_name_profile
                    text: ""
                    bold: True
                    halign: "left"
                    valign: "middle"
                    text_color: 0, 0, 0, 1
                    theme_font_size: "Custom"
                    font_size: "22sp"
                    size_hint_y: None
                    height: "40dp"

                AnchorLayout:
                    anchor_y: "top"
                    anchor_x: "left"
                    size_hint_y: None
                    height: "75dp"   # reduced height so button stays close to name

                    MDButton:
                        id: edit_profile_picture_button
                        style: "tonal"
                        size_hint: None, None
                        height: "36dp"
                        width: "180dp"
                        radius: [20, 20, 20, 20]
                        on_release:
                            root.open_file_chooser()

                        MDButtonText:
                            text: "Edit Profile Picture"
                            font_style: "Body"
                            role: "small"

        # ----------- MY GOALS BOX ------------
        MDBoxLayout:
            orientation: "vertical"
            size_hint: 0.9, None
            height: dp(110)
            pos_hint: {"center_x": 0.5}
            padding: dp(12)
            spacing: dp(10)

            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [20, 20, 20, 20]

            MDBoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: "40dp"
                spacing: dp(10)

                MDLabel:
                    text: "My Goals"
                    bold: True
                    theme_font_size: "Custom"
                    font_size: "20sp"
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1
                    halign: "left"

                MDIconButton:
                    id: dots_icon
                    icon: "dots-vertical"
                    size_hint: None, None
                    size: "24dp", "24dp"
                    pos_hint: {"center_y": 0.7}
                    on_release:
                        root.show_edit_goals_dropdown()

            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)

                # Fitness Goal
                MDBoxLayout:
                    orientation: "vertical"
                    MDLabel:
                        text: "Fitness Goal:"
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"

                    MDLabel:
                        id: fitness_goal_label
                        text: " "
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"
                        bold: True

                # Desired Weight
                MDBoxLayout:
                    orientation: "vertical"
                    MDLabel:
                        text: "Goal Weight:"
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"

                    MDLabel:
                        id: desired_weight_label
                        text: " "
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"
                        bold: True

                # Daily Calorie
                MDBoxLayout:
                    orientation: "vertical"
                    MDLabel:
                        text: "Daily Calorie:"
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"


                    MDLabel:
                        id: daily_calorie_label
                        text: " "
                        font_size: "14sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0, 0, 1
                        halign: "center"
                        bold: True

        # ----------- MY ACCOUNT SECTION ------------
        MDLabel:
            text: "My Account"
            bold: True
            halign: "left"
            theme_font_size: "Custom"
            font_size: "20sp"
            text_color: 0, 0, 0, 1
            padding: [35, 0]     # pull it upward
            size_hint_y: None
            height: dp(60)

        # -------- ACCOUNT BUTTONS --------
        MDBoxLayout:
            orientation: "vertical"
            size_hint: 0.9, None
            height: self.minimum_height
            pos_hint: {"center_x": 0.5}
            spacing: dp(12)
            padding: [0, 0, 0, 85]

            # --- EDIT PROFILE BUTTON  ---
            MDButton:
                id: edit_profile
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "480dp"
                height: "40dp"
                md_bg_color: 0.1, 0.7, 0.1, 1   # default
                on_release:
                    root.open_edit_profile_dialog()

                MDButtonText:
                    text: "Edit Profile                                 "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Title"
                    role: "large"

            # --- FAQS ACCOUNT BUTTON  ---
            MDButton:
                id: faqs_account_btn
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "480dp"
                height: "40dp"
                md_bg_color: 0.1, 0.7, 0.1, 1   # default
                on_release:
                    app.root.current = "faqs_screen"

                MDButtonText:
                    text: "FAQs                                          "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Title"
                    role: "large"

            # --- Change Password BUTTON  ---
            MDButton:
                id: change_pass
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                width: "480dp"
                height: "40dp"
                md_bg_color: 0.1, 0.7, 0.1, 1   # default
                on_release:
                    root.open_change_password_dialog()

                MDButtonText:
                    text: "Change Password                    "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Title"
                    role: "large"

            # --- LOGOUT BUTTON  ---
            MDButton:
                id: logout_btn
                style: "filled"
                theme_bg_color: "Custom"
                radius: [30, 30, 30, 30]
                size_hint_x: None
                size_hint_x: 1
                height: "40dp"
                md_bg_color: 0.1, 0.7, 0.1, 1   # default
                on_release:
                    root.logout()

                MDButtonText:
                    text: "Log Out                                      "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_style: "Title"
                    role: "large"



<FAQSScreen>:
    name: "faqs_screen"
    id: faqs_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"

        # ---------------- TOP BAR ----------------
        MDBoxLayout:
            id: top_bar
            size_hint_y: None
            height: "60dp"
            padding: [10, 10, 10, 10]
            md_bg_color: (0.902, 0.902, 0.902, 1)

            MDIconButton:
                icon: "arrow-left"
                icon_color: 0, 0, 0, 1
                on_release:
                    app.root.current = "profile_screen"

            MDLabel:
                text: "FAQs"
                bold: True
                halign: "center"
                valign: "middle"
                text_color: 0, 0, 0, 1
                theme_font_size: "Custom"
                font_size: "22sp"
                size_hint_x: 1

            Widget:
                size_hint_x: None
                width: "45dp"

        # -------- SCROLLABLE FAQ LIST --------
        ScrollView:
            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: "12dp"
                spacing: "10dp"

                FAQItem:
                    question: "What is FitnessGo?"
                    answer: "FitnessGo is a personalized fitness management app that helps you track calories, save favorite workouts and articles, set fitness goals, and improve your overall wellness."

                FAQItem:
                    question: "How does FitnessGo personalize my experience?"
                    answer: "FitnessGo uses your age, gender, height, weight, activity level, fitness goal, and health conditions to personalize calorie goals, workouts, and recommendations."

                FAQItem:
                    question: "How do I create a FitnessGo account?"
                    answer: "You can create an account by signing up with your username, email, password, and enter personal information then verify your email with a 6-digit OTP."

                FAQItem:
                    question: "How do I edit my profile information?"
                    answer: "Go to Profile > Edit Profile to update your personal information like name, age, gender, or weight."

                FAQItem:
                    question: "Can I update my fitness goals later?"
                    answer: "Yes. Go to Profile > My Goals > Edit Fitness Goals to update your goal, desired weight, and daily calorie target."

                FAQItem:
                    question: "How do I change my profile picture?"
                    answer: "Go to Profile > Edit Profile Picture and upload a new photo."

                FAQItem:
                    question: "How do I reset my password if I forget it?"
                    answer: "Click Forgot Password on the login screen, enter your email, verify the OTP, and create a new password."

                FAQItem:
                    question: "How do I change my password while logged in?"
                    answer: "Go to Profile > Change Password, verify your email using OTP, then set a new password."

                FAQItem:
                    question: "Is my personal data secure?"
                    answer: "Yes. FitnessGo securely stores your data and protects your account using email verification and password security."

                FAQItem:
                    question: "How do I log my food intake?"
                    answer: "Go to Calorie Counter, enter food type, weight, meal type (breakfast, lunch, snack, dinner), and save it."

                FAQItem:
                    question: "Does FitnessGo calculate calories automatically?"
                    answer: "Yes. The Calorie Counter helps estimate food calories based on your input."

                FAQItem:
                    question: "Can I edit or delete food entries?"
                    answer: "Yes. Go to Activity Log â†’ Food, select an entry, and edit or delete it."

                FAQItem:
                    question: "Can I view my past calorie intake?"
                    answer: "Yes. Use the calendar view in the Activity Log to see food entries by date."

                FAQItem:
                    question: "Does FitnessGo provide workout exercises?"
                    answer: "Yes. FitnessGo provides beginner, intermediate, and advanced workout routines."

                FAQItem:
                    question: "Can I save workouts or exercises?"
                    answer: "Yes. You can save exercises and view them later in Activity Log â†’ Workouts."

                FAQItem:
                    question: "What is the Wellness Hub?"
                    answer: "The Wellness Hub provides health articles, exercise guides, and fitness tips to support your wellness journey."

                FAQItem:
                    question: "Can I save health articles?"
                    answer: "Yes. Saved articles are available in Activity Log â†’ Articles."

                FAQItem:
                    question: "What is the Fitness Wall?"
                    answer: "The Fitness Wall is a feature in FitnessGo where users can post fitness-related content such as workouts, progress updates, and motivational messages. It serves as a space to share personal fitness journeys and view posts from other users."

                FAQItem:
                    question: "Who can see my posts on the Fitness Wall?"
                    answer: "Public â€“ visible to all FitnessGo users\n\nPrivate â€“ visible only to the post owner\n\nHowever, all posts (public and private) may be reviewed by authorized system administrators for moderation and system management purposes only."

                FAQItem:
                    question: "What type of content can I post on the Fitness Wall?"
                    answer: "You can post:\n\nâ€¢ Workout routines\nâ€¢ Fitness progress updates\nâ€¢ Motivational or wellness messages\nâ€¢ Fitness-related photos\n\nContent should be respectful and appropriate."

                FAQItem:
                    question: "What type of posts are not allowed?"
                    answer: "Not allowed posts include:\n\nâ€¢ Offensive, explicit, or hateful content\nâ€¢ Harassment or bullying\nâ€¢ Misleading or harmful fitness information\nâ€¢ Spam or non-fitness-related content"

                FAQItem:
                    question: "What happens if I post inappropriate content?"
                    answer: "If a post violates system rules, the following actions may be taken:\n\nâ€¢ Post removal\nâ€¢ Warning notification\nâ€¢ Account deactivation for repeated or serious violations"

                FAQItem:
                    question: "Can I edit or delete my posts?"
                    answer: "Yes. You can edit or delete your own Fitness Wall posts at any time. Other users cannot modify your posts."

                FAQItem:
                    question: "Why was my post removed from the Fitness Wall?"
                    answer: "Posts may be removed if they:\n\nâ€¢ Contain inappropriate or offensive content\nâ€¢ Violate FitnessGoâ€™s community guidelines\nâ€¢ Include misleading or harmful information\n\nRepeated violations may result in account restrictions."

                FAQItem:
                    question: "Why canâ€™t I see some posts on the Fitness Wall?"
                    answer: "You may not see certain posts if:\n\nâ€¢ The post is set to Private\nâ€¢ The post was removed by an administrator\nâ€¢ The account that created the post has been deactivated"

                FAQItem:
                    question: "Is the Fitness Wall available to all users?"
                    answer: "Yes. All active FitnessGo users can access the Fitness Wall and create posts."

                FAQItem:
                    question: "How does the Fitness Wall help users stay motivated?"
                    answer: "By viewing fitness updates and progress from other users, the Fitness Wall encourages consistency, inspiration, and awareness of healthy lifestylesâ€”even without direct interaction features."

                FAQItem:
                    question: "Are Fitness Wall activities monitored?"
                    answer: "Yes. All Fitness Wall posts, including private posts, may be reviewed by administrators. Moderation activities are logged for accountability."

                FAQItem:
                    question: "Why is moderation necessary?"
                    answer: "Moderation helps maintain a safe, respectful, and fitness-focused environment for all users."

                FAQItem:
                    question: "Is my information protected?"
                    answer: "Yes. Admin access is limited to authorized personnel and is used strictly for moderation and system management purposes."


                FAQItem:
                    question: "Can I edit or delete my posts?"
                    answer: "Yes. Tap the three dots on your post to edit, change privacy, or delete it."

                FAQItem:
                    question: "Can I set my post privacy?"
                    answer: "Yes. You can choose whether your post is public or private."

                FAQItem:
                    question: "What is the AI Fitness Buddy??"
                    answer: "The AI Fitness Buddy helps answer questions about workouts, calorie tracking, wellness articles, and app navigation."

                FAQItem:
                    question: "Can I use FitnessGo offline?"
                    answer: "No. FitnessGo requires an active internet connection to access features such as calorie tracking, workout content, wellness articles, and data synchronization."

                FAQItem:
                    question: "Who can manage or moderate Fitness Wall content?"
                    answer: "System administrators can review and manage Fitness Wall posts to ensure all content follows community guidelines."

                FAQItem:
                    question: "What can administrators see on the Fitness Wall?"
                    answer: "Administrators can view:\n\nâ€¢ All posts (public and private)\nâ€¢ Post content (text and images)\nâ€¢ Post creation date and time\nâ€¢ Post visibility setting"

                FAQItem:
                    question: "Can administrators edit user posts?"
                    answer: "No. Administrators cannot edit user posts. They can only remove posts that violate policies."

                FAQItem:
                    question: "Can Fitness Wall activity affect my account status?"
                    answer: "Yes. Accounts that accumulate five (5) violations related to Fitness Wall posts will be automatically deactivated by the system."


<FAQItem@MDBoxLayout>:
    orientation: "vertical"
    size_hint_y: None
    height: self.minimum_height
    spacing: "6dp"

    question: ""
    answer: ""
    expanded: False

    # ---------- QUESTION CARD ----------
    MDCard:
        size_hint_y: None
        height: "48dp"
        radius: [24]
        theme_bg_color: "Custom"
        md_bg_color: 0.1, 0.7, 0.1, 1
        elevation: 2
        padding: "16dp"
        on_release:
            root.expanded = not root.expanded

        # PLUS / MINUS ICON
        MDIcon:
            icon: "minus" if root.expanded else "plus"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            size_hint_x: None
            width: "24dp"

        MDLabel:
            text: root.question
            bold: True
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            halign: "left"
            valign: "middle"

    # ---------- ANSWER CARD ----------
    MDCard:
        size_hint_y: None
        height: self.minimum_height if root.expanded else 0
        opacity: 1 if root.expanded else 0
        radius: [12]
        md_bg_color: 1, 1, 1, 1
        padding: "12dp"
        elevation: 1

        MDLabel:
            text: root.answer
            text_color: 0.1, 0.4, 0.1, 1
            halign: "left"
            text_size: self.width - dp(20), None
            size_hint_y: None
            height: self.texture_size[1]





<SavedArticleCard>:
    article: {}
    size_hint_y: None
    height: "70dp"   # âœ” Same height as Workout Log
    radius: [20, 20, 20, 20]
    padding: 0        # âœ” Match Workout Log style
    md_bg_color: 0.95, 0.95, 0.95, 1

    on_release: app.open_saved_article(root.article)

    MDBoxLayout:
        orientation: "horizontal"
        spacing: "8dp"
        padding: "8dp"

        # -------------------------
        # THUMBNAIL (smaller now)
        # -------------------------
        FitImage:
            source: root.article.get("image", "logo.png")
            size_hint_x: None
            width: "60dp"         # âœ” Smaller so height stays 70dp
            radius: [15, 15, 15, 15]

        # -------------------------
        # TEXT AREA
        # -------------------------
        MDBoxLayout:
            orientation: "vertical"
            spacing: "2dp"

            MDLabel:
                text: root.article.get("title", "")
                bold: True
                font_size: "13sp"
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                shorten: True

            MDLabel:
                text: root.article.get("author", "")
                font_size: "11sp"
                theme_text_color: "Custom"
                text_color: 0.15, 0.15, 0.15, 1
                shorten: True

        # -------------------------
        # DELETE BUTTON (centered)
        # -------------------------
        MDBoxLayout:
            size_hint_x: None
            width: "45dp"
            pos_hint: {"center_y": 0.5}

            MDIconButton:
                icon: "delete"
                theme_icon_color: "Custom"
                icon_color: 0.7, 0, 0, 1
                on_release:
                    app.root.get_screen("article_log_screen").confirm_delete_article(root.article)
                pos_hint: {"center_y": 0.5}


<FeaturedCard>:
    size_hint: None, None
    width: dp(330)
    height: dp(220)
    radius: [22, 22, 22, 22]
    elevation: 4
    padding: 0
    on_release: root.open()

    RelativeLayout:

        # IMAGE (PROPER FIT, NO DEPRECATED PROPS)
        FitImage:
            source: root.image_source
            radius: [22, 22, 22, 22]

        # DARK OVERLAY
        Widget:
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.55
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [22, 22, 22, 22]

        # TEXT BOX
        MDBoxLayout:
            orientation: "vertical"
            padding: dp(14)
            spacing: dp(4)
            size_hint: 1, None
            height: dp(120)
            pos_hint: {"x": 0, "y": 0}

            MDLabel:
                text: root.category.upper()
                font_size: "12sp"
                bold: True
                theme_text_color: "Custom"
                text_color: 1, 1, 1, .85
                size_hint_y: None
                height: self.texture_size[1]
                shorten: True

            MDLabel:
                text: root.title
                bold: True
                font_size: "16sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                halign: "left"
                valign: "top"
                text_size: self.width, None
                size_hint_y: None
                height: self.texture_size[1]
                shorten: True
                max_lines: 2

            MDLabel:
                text: f"{root.author} â€¢ {root.date}"
                font_size: "11sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, .8
                size_hint_y: None
                height: self.texture_size[1]
                shorten: True



<StandardHeader@MDBoxLayout>:
    title: ""
    orientation: "horizontal"
    size_hint_y: None
    height: dp(65)
    padding: dp(15), dp(10)
    spacing: dp(12)
    md_bg_color: 0.902, 0.902, 0.902, 1

    Image:
        source: "logo.png"
        size_hint: None, None
        width: dp(45)
        height: dp(45)
        pos_hint: {"center_y": 0.5}


    MDLabel:
        text: root.title
        font_style: "Title"
        bold: True
        halign: "left"
        valign: "middle"
        text_color: 0, 0, 0, 1



<StandardTopTabs@MDBoxLayout>:
    current_tab: ""
    orientation: "horizontal"
    spacing: dp(10)
    size_hint_y: None
    height: dp(40)
    padding: dp(5), 0
    pos_hint: {"center_x": 0.5}

    # ARTICLES
    MDButton:
        style: "filled" if root.current_tab == "articles" else "tonal"
        radius: [20, 20, 20, 20]
        md_bg_color: (0,0.6,0,1) if root.current_tab == "articles" else (1,1,1,1)
        line_color: 0, 0.7, 0, 1
        on_release: app.root.current = "article_hub"
        MDButtonText:
            text: "Articles"
            text_color: (1,1,1,1) if root.current_tab == "articles" else (0,0.6,0,1)

    # EXERCISES
    MDButton:
        style: "filled" if root.current_tab == "exercises" else "tonal"
        radius: [20, 20, 20, 20]
        md_bg_color: (0,0.6,0,1) if root.current_tab == "exercises" else (1,1,1,1)
        line_color: 0, 0.7, 0, 1
        on_release: app.root.current = "exercise_hub"
        MDButtonText:
            text: "Exercises"
            text_color: (1,1,1,1) if root.current_tab == "exercises" else (0,0.6,0,1)

    # SUCCESS STORIES
    MDButton:
        style: "filled" if root.current_tab == "stories" else "tonal"
        radius: [20, 20, 20, 20]
        md_bg_color: (0,0.6,0,1) if root.current_tab == "stories" else (1,1,1,1)
        line_color: 0, 0.7, 0, 1
        on_release: app.root.current = "stories_hub"
        MDButtonText:
            text: "Success Stories"
            text_color: (1,1,1,1) if root.current_tab == "stories" else (0,0.6,0,1)


<PostTemplate>:
    size_hint: None, None
    width: dp(330)
    height: self.minimum_height
    pos_hint: {"center_x": .5}
    radius: [20]
    padding: dp(15)
    spacing: dp(8)
    md_bg_color: 1, 1, 1, 1
    elevation: 2

    MDBoxLayout:
        orientation: "vertical"
        size_hint_y: None
        height: self.minimum_height
        spacing: dp(10)

        # ===== HEADER =====
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(50)

            Image:
                id: p_user_img
                size_hint: None, None
                size: dp(45), dp(45)
                allow_stretch: True
                keep_ratio: True

            MDBoxLayout:
                orientation: "vertical"
                size_hint_x: 1

                MDLabel:
                    id: p_username
                    text: "User Name"
                    bold: True
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1

                MDBoxLayout:
                    orientation: "horizontal"
                    spacing: dp(5)
                    size_hint_y: None
                    height: dp(18)

                    MDIcon:
                        id: p_audience_icon
                        icon: "earth"
                        theme_text_color: "Hint"
                        size_hint_x: None
                        width: dp(18)

                    MDLabel:
                        id: p_time
                        text: "Just now"
                        font_size: "11sp"
                        theme_text_color: "Custom"
                        text_color: .4, .4, .4, 1
#EDITEDIT
            # âœ… MENU BUTTON â€” FIXED
            MDIconButton:
                id: p_menu_button
                icon: "dots-vertical"
                size_hint: None, None
                size: dp(40), dp(40)
                pos_hint: {"center_y": 0.5}
                opacity: 1
                disabled: False
                theme_icon_color: "Custom"
                icon_color: 0, 0, 0, 1   # ðŸ”¥ THIS IS THE FIX
                on_release: app.open_post_menu(root)

        # ===== POST TEXT =====
        MDLabel:
            id: p_text
            text: ""
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1
            size_hint_y: None
            height: self.texture_size[1]
            text_size: self.width, None

        # ===== POST IMAGE =====
        Image:
            id: p_image
            size_hint_y: None
            allow_stretch: True
            keep_ratio: True
            width: root.width
            height: (self.texture_size[1] * self.width / self.texture_size[0]) if self.texture else 0


<AIFitnessBuddyScreen>:
    name: "ai_fitness_buddy_screen"
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"

        # ---------------- TOP BAR ----------------
        MDBoxLayout:
            size_hint_y: None
            height: dp(60)
            padding: [8, 10, 8, 10]
            spacing: dp(10)
            md_bg_color: (0.902, 0.902, 0.902, 1)

            # ðŸ”™ BACK BUTTON
            MDIconButton:
                icon: "arrow-left"
                theme_icon_color: "Custom"
                icon_color: 0, 0.6, 0, 1
                on_release: root.go_back()

            # TITLE
            MDLabel:
                text: "AI Fitness Buddy"
                bold: True
                theme_font_size: "Custom"
                font_size: "20sp"
                halign: "left"
                valign: "center"
                size_hint_x: 1
                padding: [0, 6, 0, 0]

            # SEARCH
            MDIconButton:
                icon: "magnify"
                on_release: root.show_search_dialog()

            # CLEAR CHAT
            MDIconButton:
                icon: "delete-sweep"
                on_release: root.show_delete_all_dialog()

        # ---------------- WELCOME MESSAGE ----------------
        MDBoxLayout:
            id: welcome_box
            orientation: "vertical"
            size_hint_y: None
            height: dp(180)
            padding: [20, 30, 20, 20]
            spacing: 15

            MDLabel:
                text: "How can I help you?"
                halign: "center"
                bold: True
                font_size: "20sp"

            MDLabel:
                text: "Ask me anything, workouts, wellness\narticles or even how to navigate the app"
                halign: "center"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1

        # ---------------- QUICK NAV (EMPTY CHAT ONLY) ----------------
        MDBoxLayout:
            id: quick_nav
            orientation: "vertical"
            adaptive_height: True
            spacing: dp(16)
            padding: [0, 20, 0, 0]

            MDButton:
                style: "outlined"
                size_hint_x: None
                width: dp(280)
                height: dp(50)
                radius: [25, 25, 25, 25]
                pos_hint: {"center_x": 0.5}
                theme_bg_color: "Custom"
                md_bg_color: 0.12, 0.45, 0.12, 1
                theme_line_color: "Custom"
                line_color: 0.1, 0.7, 0.1, 1
                on_release: root.go_to_dashboard()

                MDButtonText:
                    text: "   Fitness Wall   "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: "16sp"
                    bold: True

            MDButton:
                style: "outlined"
                size_hint_x: None
                width: dp(280)
                height: dp(50)
                radius: [25, 25, 25, 25]
                pos_hint: {"center_x": 0.5}
                theme_bg_color: "Custom"
                md_bg_color: 0.12, 0.45, 0.12, 1
                theme_line_color: "Custom"
                line_color: 0.1, 0.7, 0.1, 1
                on_release: root.go_to_calorie_counter()

                MDButtonText:
                    text: "Calorie Counter"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: "16sp"
                    bold: True

            MDButton:
                style: "outlined"
                size_hint_x: None
                width: dp(280)
                height: dp(50)
                radius: [25, 25, 25, 25]
                pos_hint: {"center_x": 0.5}
                theme_bg_color: "Custom"
                md_bg_color: 0.12, 0.45, 0.12, 1
                theme_line_color: "Custom"
                line_color: 0.1, 0.7, 0.1, 1
                on_release: root.go_to_activity_log()

                MDButtonText:
                    text: "   Activity Log   "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: "16sp"
                    bold: True

            MDButton:
                style: "outlined"
                size_hint_x: None
                width: dp(280)
                height: dp(50)
                radius: [25, 25, 25, 25]
                pos_hint: {"center_x": 0.5}
                theme_bg_color: "Custom"
                md_bg_color: 0.12, 0.45, 0.12, 1
                theme_line_color: "Custom"
                line_color: 0.1, 0.7, 0.1, 1
                on_release: root.go_to_wellness_hub()

                MDButtonText:
                    text: "  Wellness Hub  "
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: "16sp"
                    bold: True



        # ---------------- SEARCH BAR (FIXED) ----------------
        MDBoxLayout:
            id: search_bar
            orientation: "vertical"
            size_hint_y: None
            height: 0
            opacity: 0

        # ---------------- CHAT AREA ----------------
        MDScrollView:
            id: chat_scroll
            do_scroll_x: False

            MDBoxLayout:
                id: chat_container
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: [15, 20]
                spacing: dp(15)

                Widget:
                    size_hint_y: 1

        # ---------------- INPUT AREA (CANVA STYLE) ----------------
        MDBoxLayout:
            size_hint_y: None
            height: message_input_box.height + dp(20)
            padding: [12, 0, 12, 12]

            MDCard:
                id: message_input_box
                orientation: "horizontal"
                size_hint_y: None
                height: dp(52)
                radius: [26, 26, 26, 26]
                theme_bg_color: "Custom"

                md_bg_color: 0.349, 0.557, 0.369, 1  # green
                padding: [18, 8, 12, 8]
                spacing: dp(8)
                elevation: 0

                TextInput:
                    id: message_input
                    hint_text: "Ask anything"
                    multiline: True
                    size_hint_x: 1
                    background_color: 0, 0, 0, 0
                    foreground_color: 1, 1, 1, 1
                    hint_text_color: 1, 1, 1, 0.9
                    cursor_color: 1, 1, 1, 1
                    font_size: "16sp"
                    padding: [0, 12, 0, 0]
                    on_text: root.adjust_input_height(self)

                MDIconButton:
                    icon: "send"
                    size_hint: None, None
                    size: "36dp", "36dp"
                    pos_hint: {"center_y": 0.5}
                    theme_icon_color: "Custom"
                    icon_color: 1, 1, 1, 1
                    on_release: root.send_message()



<UserBubble@MDBoxLayout>:
    message_text: ""
    message_id: 0
    orientation: "horizontal"
    size_hint_y: None
    height: self.ids.bubble_container.height + dp(10)
    padding: [10, 5]

    Widget:
        size_hint_x: 0.15

    MDBoxLayout:
        id: bubble_container
        orientation: "vertical"
        size_hint_x: None
        size_hint_y: None
        width: min(dp(300), root.width * 0.78)
        height: self.minimum_height
        spacing: dp(5)

        MDCard:
            size_hint_y: None
            height: message_label.texture_size[1] + dp(20)
            radius: [22, 22, 6, 22]
            theme_bg_color: "Custom"
            md_bg_color: 0.17, 0.56, 0.20, 1   # Canva green
            padding: [16, 10]
            elevation: 0

            MDLabel:
                id: message_label
                text: root.message_text
                markup: True
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.parent.width - dp(32), None
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1   # white text

        MDIconButton:
            icon: "delete-outline"
            size_hint: None, None
            size: "22dp", "22dp"
            pos_hint: {"right": 1}
            theme_icon_color: "Custom"
            icon_color: 0.7, 0.7, 0.7, 1
            on_release:on_release: app.root.get_screen("ai_fitness_buddy_screen").show_delete_message_dialog(root.message_id)


<AIBubble@MDBoxLayout>:
    message_text: ""
    message_id: 0
    orientation: "horizontal"
    size_hint_y: None
    height: self.ids.bubble_container.height + dp(10)
    padding: [10, 5]

    MDBoxLayout:
        id: bubble_container
        orientation: "vertical"
        size_hint_x: None
        size_hint_y: None
        width: min(dp(300), root.width * 0.78)
        height: self.minimum_height
        spacing: dp(5)

        MDCard:
            size_hint_y: None
            height: message_label.texture_size[1] + dp(20)
            radius: [22, 22, 22, 6]
            theme_bg_color: "Custom"
            md_bg_color: 0.6, 0.8, 0.6, 1
            padding: [16, 10]
            elevation: 0

            MDLabel:
                id: message_label
                text: root.message_text
                markup: True
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.parent.width - dp(32), None
                theme_text_color: "Custom"
                text_color: 0.15, 0.15, 0.15, 1   # dark gray text

    Widget:
        size_hint_x: 0.15










# Admin

<admin_loginScreen>:
    name: "admin_login_screen"
    id: admin_login_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        padding: 20
        orientation: "vertical"

    Image:
        source: "logo.png"
        size_hint: None, None
        width: "200dp"
        height: "200dp"
        pos_hint: {"center_x": .5, "center_y": .8}

    MDLabel:
        text: "Fitness Go"
        font_style: "Display"
        role: "medium"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .5, "center_y": .58}

    MDLabel:
        text: "Username: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .18, "center_y": .53}

    MDTextField:
        id: username_field
        mode: "outlined"
        size_hint_x: None
        width: "300dp"
        radius: [30, 30, 30, 30]
        pos_hint: {"center_x": .5, "center_y": .46}

        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        # âœ… canvas.after MUST come before child widgets
        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

        MDTextFieldTrailingIcon:
            icon: "account"
            theme_icon_color: "Custom"
            icon_color_normal: 0, 0.8, 0, 1   # green when unfocused
            icon_color_focus: 0, 0.8, 0, 1


    MDLabel:
        text: "Password: "
        font_style: "Title"
        role: "small"
        halign: "center"
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1
        pos_hint: {"center_x": .18, "center_y": .39}

    MDTextField:
        id: password_field
        mode: "outlined"
        size_hint_x: None
        width: "300dp"
        pos_hint: {"center_x": .5, "center_y": .32}
        password_mask: "â€¢"
        radius: [30, 30, 30, 30]
        password: True
        md_bg_color: 0.98, 1, 0.98, 1
        line_color_normal: 0, 0, 0, 0
        line_color_focus: 0, 0, 0, 0
        text_color_normal: 0, 0, 0, 1
        text_color_focus: 0, 0, 0, 1

        canvas.after:
            Color:
                rgba: 0, 0.8, 0, 1
            Line:
                width: 2.5
                rounded_rectangle: (self.x, self.y, self.width, self.height, 30)

    MDIconButton:
        id: login_eye_icon
        icon: "eye-off"
        size_hint: None, None
        size: "32dp", "32dp"
        pos_hint: {"center_x": 0.83, "center_y": 0.32} # ðŸ”‘ alignment fix
        theme_icon_color: "Custom"
        icon_color: 0, 0.639, 0, 1
        on_release:
            root.toggle_password_visibility(password_field, self)

    # Show Password Checkbox
    BoxLayout:
        size_hint_x: None
        width: "240dp"
        height: "40dp"
        pos_hint: {"center_x": .40, "center_y": .20}
        spacing: 10
        orientation: "horizontal"

    MDButton:
        id: login_button
        style: "filled"
        pos_hint: {"center_x": .5, "center_y": .18}
        on_release:
            root.manager.transition.direction = "fade"
            root.login_admin()

        MDButtonText:
            text: "Log In"


<AdminDashboardScreen>:
    name: "admin_dashboard_screen"
    id: admin_dashboard_screen

    MDBoxLayout:
        orientation: "vertical"
        md_bg_color: 0.95, 0.95, 0.95, 1

        # -------------------- HEADER ---------------------------
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: self.minimum_height
            padding: 15
            spacing: 15

            MDBoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: "40dp"
                spacing: "10dp"

                Image:
                    source: "logo.png"
                    size_hint: None, None
                    size: "40dp", "40dp"
                    pos_hint: {"center_y": 0.55}

                MDLabel:
                    text: "FitnessGo"
                    font_style: "Title"
                    bold: True
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1

                    size_hint_x: None
                    adaptive_width: True

                    size_hint_y: None
                    height: "40dp"

                    valign: "middle"
                    text_size: None, self.height


                Widget:
                    size_hint_x: 1

                MDIconButton:
                    icon: "cog-outline"
                    tooltip_text: "Admin Options"
                    on_release: app.open_admin_menu()


            MDBoxLayout:
                size_hint_y: None
                height: "2dp"

            MDLabel:
                id: greeting_label
                text: "Hi, Admin!"
                pos_hint: {"x": .03}
                font_style: "Title"
                bold: True
                text_color: 0, 0, 0, 1
                padding_y: "0dp"

            MDLabel:

            MDLabel:
                id: date_label
                text: "Sunday, October 10"
                pos_hint: {"x": .03}
                role: "medium"
                text_color: 0, 0, 0, 1
                padding_y: "0dp"


        # ---------- ACTIVE FEEDWALL USERS ----------
        MDCard:
            size_hint_x: None
            width: self.parent.width - dp(24)
            size_hint_y: None
            height: "48dp"
            pos_hint: {"center_x": 0.5}
            radius: [24, 24, 24, 24]
            theme_bg_color: "Custom"   # ðŸ‘ˆ IMPORTANT
            md_bg_color: 0.1, 0.7, 0.1, 1
            elevation: 0


            MDLabel:
                id: active_feedwall_label
                text: "Active Feedwall Users: 15"
                halign: "center"
                valign: "middle"
                bold: True
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1

        # ---------- SPACER ----------
        MDBoxLayout:
            size_hint_y: None
            height: "16dp"

        # ---------- FITNESS WALL USERS LABEL ----------
        MDLabel:
            text: "Fitness Wall Users"
            bold: True
            padding_x: "16dp"
            theme_text_color: "Custom"
            text_color: 0, 0.45, 0, 1
            size_hint_y: None
            height: self.texture_size[1]

        # ================= SCROLL AREA =================
        ScrollView:
            size_hint_y: 1
            do_scroll_x: False

            MDBoxLayout:
                id: feedwall_users_container
                orientation: "vertical"
                spacing: "12dp"
                padding: "12dp"
                size_hint_y: None
                height: self.minimum_height

        # ---------- BOTTOM NAV ----------
        MDBoxLayout:
            size_hint_y: None
            height: "90dp"
            padding: "12dp"

            MDCard:
                size_hint_x: 1
                height: "75dp"
                radius: [30, 30, 30, 30]
                md_bg_color: 1, 1, 1, 1
                style: "outlined"
                line_color: 0, 0.6, 0, 1
                stroke_width: 2
                elevation: 0

                FloatLayout:

                    # ----- LEFT : WELLNESS HUB -----
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 4
                        size_hint: None, None
                        size: "120dp", "60dp"
                        pos_hint: {"x": 0.05, "center_y": 0.5}

                        MDIconButton:
                            icon: "spa"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            pos_hint: {"center_x": 0.5}
                            on_release:
                                app.root.current = "admin_wellnesshubsreen"

                        MDLabel:
                            text: "Wellness Hub"
                            halign: "center"
                            theme_font_size: "Custom"
                            font_size: "12sp"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1

                    # ----- CENTER : HOME -----
                    MDIconButton:
                        icon: "home"
                        style: "filled"
                        theme_bg_color: "Custom"
                        md_bg_color: 0, 0.6, 0, 1
                        size_hint: None, None
                        size: "60dp", "60dp"
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        on_release:
                            app.root.current = "admin_dashboard_screen"

                    # ----- RIGHT : MANAGE ACCOUNTS -----
                    BoxLayout:
                        orientation: "vertical"
                        spacing: 4
                        size_hint: None, None
                        size: "120dp", "60dp"
                        pos_hint: {"right": 0.95, "center_y": 0.5}

                        MDIconButton:
                            icon: "account-group"
                            theme_icon_color: "Custom"
                            icon_color: 0, 0.6, 0, 1
                            pos_hint: {"center_x": 0.5}
                            on_release:
                                app.root.current = "manage_active_account_screen"

                        MDLabel:
                            text: "Manage Accounts"
                            halign: "center"
                            theme_font_size: "Custom"
                            font_size: "12sp"
                            theme_text_color: "Custom"
                            text_color: 0, 0.6, 0, 1
                            width: dp(120)          # ðŸ‘ˆ must match parent width
                            text_size: self.size   # ðŸ‘ˆ prevents wrapping

<ActiveAccountCard@MDCard>:
    size_hint_y: None
    height: dp(95)
    radius: [12, 12, 12, 12]
    padding: dp(12)
    elevation: 0
    md_bg_color: 0.94, 0.94, 0.94, 1

    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(4)

        MDLabel:
            id: name
            bold: True
            font_size: "14sp"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1

        MDLabel:
            id: email
            theme_font_size: "Custom"
            font_size: "12sp"
            theme_text_color: "Custom"
            text_color: 0.4, 0.4, 0.4, 1

        MDLabel:
            id: last_login
            theme_font_size: "Custom"
            font_size: "12sp"
            theme_text_color: "Custom"
            text_color: 0.3, 0.3, 0.3, 1

<DeactivatedAccountCard@MDCard>:
    size_hint_y: None
    height: dp(115)
    radius: [12, 12, 12, 12]
    padding: dp(12)
    elevation: 0
    md_bg_color: 0.92, 0.92, 0.92, 1

    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(4)

        MDLabel:
            id: name
            bold: True
            font_size: "14sp"
            theme_text_color: "Custom"
            text_color: 0, 0, 0, 1

        MDLabel:
            id: email
            theme_font_size: "Custom"
            font_size: "12sp"
            theme_text_color: "Custom"
            text_color: 0.4, 0.4, 0.4, 1

        MDLabel:
            id: last_login
            theme_font_size: "Custom"
            font_size: "12sp"
            theme_text_color: "Custom"
            text_color: 0.3, 0.3, 0.3, 1

        MDLabel:
            id: reason
            theme_font_size: "Custom"
            text: "Due to inactive use of account"
            font_size: "12sp"
            theme_text_color: "Custom"
            text_color: 0.45, 0.45, 0.45, 1



<ManageActiveAccountScreen>
    name: "manage_active_account_screen"
    id: manage_active_account_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(16)
        spacing: dp(12)

        # ---------------- HEADER (NO pos_hint) ----------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)
            spacing: dp(10)

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_x": 0.11, "center_y": 0.43}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Manage Accounts"
                font_style: "Headline"
                role: "small"
                bold: True
                halign: "left"
                valign: "middle"
                pos_hint: {"center_x": 0.25, "center_y": 0.32}
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1

        # ---------------- CATEGORY BUTTONS ----------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(50)

            MDButton:
                style: "filled"
                md_bg_color: 0, 0.6, 0, 1
                radius: [20, 20, 20, 20]
                size_hint_x: None
                width: dp(120)
                on_release:
                    root.go_to_ManageActiveAccountScreen()

                MDButtonText:
                    text: "Active\nAccounts"
                    halign: "center"
                    text_color: 1, 1, 1, 1

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                size_hint_x: None
                width: dp(140)
                on_release:
                    root.go_to_ManageViolatorsAccountScreen()

                MDButtonText:
                    text: "List of\nViolators"
                    halign: "center"

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                size_hint_x: None
                width: dp(160)
                on_release:
                    root.go_to_ManageDeactivatedAccountScreen()

                MDButtonText:
                    text: "Deactivated\nAccounts"
                    halign: "center"

        # ---------------- COUNT LABEL ----------------
        MDLabel:
            id: active_count_label
            text: "0 ACTIVE ACCOUNT"
            halign: "center"
            size_hint_y: None
            height: dp(28)
            bold: True
            theme_text_color: "Custom"
            text_color: 0, 0.5, 0, 1

        # ---------------- SCROLLABLE LIST ----------------
        ScrollView:
            do_scroll_x: False
            size_hint_y: 1

            MDList:
                id: active_account_list
                padding: dp(12), dp(16), dp(12), dp(100)
                spacing: dp(12)

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:
                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}


                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping


<ManageViolatorsAccountScreen>
    name: "manage_violators_account_screen"
    id: manage_violators_account_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(16)
        spacing: dp(12)

        # ---------------- HEADER (NO pos_hint) ----------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)
            spacing: dp(10)

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_x": 0.11, "center_y": 0.43}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Manage Accounts"
                font_style: "Headline"
                role: "small"
                bold: True
                halign: "left"
                valign: "middle"
                pos_hint: {"center_x": 0.25, "center_y": 0.32}
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1

        # ---------------- CATEGORY BUTTONS ----------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(50)

            MDButton:
                style: "tonal"
                size_hint_x: None
                width: dp(120)
                on_release:
                    root.go_to_ManageActiveAccountScreen()

                MDButtonText:
                    text: "Active\nAccounts"
                    halign: "center"

            MDButton:
                style: "filled"
                md_bg_color: 0, 0.6, 0, 1
                radius: [20, 20, 20, 20]
                size_hint_x: None
                width: dp(140)
                on_release:
                    root.go_to_ManageViolatorsAccountScreen()

                MDButtonText:
                    text: "List of\nViolators"
                    halign: "center"
                    text_color: 1, 1, 1, 1

            MDButton:
                style: "tonal"
                size_hint_x: None
                width: dp(160)
                on_release:
                    root.go_to_ManageDeactivatedAccountScreen()

                MDButtonText:
                    text: "Deactivated\nAccounts"
                    halign: "center"

        # ---------------- COUNT LABEL ----------------
        MDLabel:
            id: violators_count_label
            text: "0 VIOLATORS"
            halign: "center"
            size_hint_y: None
            height: dp(28)
            bold: True
            theme_text_color: "Custom"
            text_color: 0, 0.5, 0, 1

        # ---------------- SCROLLABLE LIST ----------------
        ScrollView:
            do_scroll_x: False
            size_hint_y: 1

            MDList:
                id: violators_account_list
                padding: dp(12), dp(16), dp(12), dp(100)
                spacing: dp(12)

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:
                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping

<ManageDeactivatedAccountScreen>
    name: "manage_deactivated_account_screen"
    id: manage_deactivated_account_screen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: dp(16)
        spacing: dp(12)

        # ---------------- HEADER (NO pos_hint) ----------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)
            spacing: dp(10)

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"center_x": 0.11, "center_y": 0.43}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Manage Accounts"
                font_style: "Headline"
                role: "small"
                bold: True
                halign: "left"
                valign: "middle"
                pos_hint: {"center_x": 0.25, "center_y": 0.32}
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1

        # ---------------- CATEGORY BUTTONS ----------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(50)

            MDButton:
                style: "tonal"
                size_hint_x: None
                width: dp(120)
                on_release:
                    root.go_to_ManageActiveAccountScreen()

                MDButtonText:
                    text: "Active\nAccounts"
                    halign: "center"

            MDButton:
                style: "tonal"
                size_hint_x: None
                width: dp(140)
                on_release:
                    root.go_to_ManageViolatorsAccountScreen()

                MDButtonText:
                    text: "List of\nViolators"
                    halign: "center"

            MDButton:
                style: "filled"
                md_bg_color: 0, 0.6, 0, 1
                radius: [20, 20, 20, 20]
                width: dp(160)
                on_release:
                    root.go_to_ManageDeactivatedAccountScreen()

                MDButtonText:
                    text: "Deactivated\nAccounts"
                    halign: "center"
                    text_color: 1, 1, 1, 1

        # ---------------- COUNT LABEL ----------------
        MDLabel:
            id: deactivated_count_label
            text: "0 DEACTIVATED ACCOUNT"
            halign: "center"
            size_hint_y: None
            height: dp(28)
            bold: True
            theme_text_color: "Custom"
            text_color: 0, 0.5, 0, 1

        # ---------------- SCROLLABLE LIST ----------------
        ScrollView:
            do_scroll_x: False
            size_hint_y: 1

            MDList:
                id: deactivated_account_list
                padding: dp(12), dp(16), dp(12), dp(100)
                spacing: dp(12)

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:
                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping


<admin_wellnesshubScreen>:
    name: "admin_wellnesshubsreen"
    id: admin_wellnesshubsreen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 15

        # HEADER
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 10

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"right": 0.95, "center_y": 0.6}
                width: "50dp"
                height: "50dp"

            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                valign: "center"

        # ARTICLES / EXERCISES TOGGLE
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(40)
            pos_hint: {"center_x": 0.5}
            size_hint_x: None
            width: self.minimum_width

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminarticles()

                MDButtonText:
                    text: "Health Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminexercise()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

        # GOAL FILTER BUTTONS (MDButton)
        MDBoxLayout:
            id: goal_buttons
            orientation: "horizontal"
            spacing: dp(8)
            adaptive_height: True
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            MDButton:
                id: btn_lose_weight
                style: "filled"
                md_bg_color: 1, 1, 1, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_loseweight()

                MDButtonText:
                    text: "Lose\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

            MDButton:
                id: btn_gain_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainweight()

                MDButtonText:
                    text: "Gain\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"


            MDButton:
                id: btn_keep_fit
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_keepfit()

                MDButtonText:
                    text: "Keep\nFit"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"


            MDButton:
                id: btn_gain_muscles
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainmuscles()

                MDButtonText:
                    text: "Gain\nMuscles"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"


        # CONTENT LIST (ADMIN VIEW)
        MDScrollView:
            do_scroll_x: False

            MDList:
                id: admin_wellness_container
                padding: [0, 0, 0, dp(100)]
                spacing: dp(12)

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:

                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping


<admin_articlesScreen>:
    name: "admin_articles"
    id: admin_articles
    md_bg_color: (0.902, 0.902, 0.902, 1)

    FloatLayout:

        MDBoxLayout:
            orientation: "vertical"
            padding: 20
            spacing: 15

            # HEADER (Logo + Title only)
            MDBoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: "70dp"
                spacing: 10

                Image:
                    source: "logo.png"
                    size_hint: None, None
                    pos_hint: {"right": 0.95, "center_y": 0.6}
                    width: "50dp"
                    height: "50dp"

                MDLabel:
                    text: "Manage Articles"
                    font_style: "Headline"
                    role: "small"
                    bold: True
                    theme_text_color: "Custom"
                    text_color: 0, 0, 0, 1
                    valign: "center"

            # ARTICLES / EXERCISES TOGGLE
            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)
                size_hint_y: None
                height: dp(40)
                pos_hint: {"center_x": 0.5}
                size_hint_x: None
                width: self.minimum_width

                MDButton:
                    style: "filled"
                    radius: [20, 20, 20, 20]
                    md_bg_color: 0, 0.6, 0, 1
                    on_release: root.go_to_adminarticles()

                    MDButtonText:
                        text: "Health Articles"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

                MDButton:
                    style: "tonal"
                    radius: [20, 20, 20, 20]
                    md_bg_color: 1, 1, 1, 1
                    line_color: 0, 0.7, 0, 1
                    on_release: root.go_to_adminexercise()

                    MDButtonText:
                        text: "Exercises"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

            # Article Count
            MDLabel:
                text: f"Total Articles: {root.article_count}"
                font_size: "12sp"
                theme_text_color: "Custom"
                text_color: 0.5, 0.5, 0.5, 1
                size_hint_y: None
                height: dp(20)

            # ARTICLES LIST
            MDScrollView:
                do_scroll_x: False

                MDList:
                    id: admin_wellness_container
                    padding: [0, 0, 0, dp(125)]
                    spacing: dp(12)

        # ---------- FLOATING ADD BUTTON (ABOVE EVERYTHING) ----------
        MDIconButton:
            icon: "plus"
            theme_icon_color: "Custom"
            icon_color: 1, 1, 1, 1
            theme_bg_color: "Custom"
            md_bg_color: 0, 0.6, 0, 1
            size_hint: None, None
            size: dp(64), dp(64)
            radius: [32, 32, 32, 32]
            elevation: 6

            # ðŸ‘‡ FLOATS ABOVE ARTICLE CARDS, NOT UNDER NAV
            pos_hint: {"right": 0.95, "y": 0.14}

            on_release: root.open_add_article_dialog()

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:

                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping




<AdminArticleCard@MDCard>:
    article: {}
    size_hint_y: None
    height: "80dp"               # âœ” same feel as Activity Log
    radius: [20, 20, 20, 20]
    padding: 0
    elevation: 0
    md_bg_color: 0.94, 0.96, 0.92, 1

    on_release:
        app.root.get_screen("admin_articles").preview_article(root.article)

    MDBoxLayout:
        orientation: "horizontal"
        spacing: "8dp"
        padding: "8dp"

        # -------------------------------------------------
        # LEFT: IMAGE (FIT, FIXED SIZE)
        # -------------------------------------------------
        FitImage:
            source: root.article.get("image", "artipic_default.png")
            size_hint_x: None
            width: "64dp"
            radius: [16, 16, 16, 16]

        # -------------------------------------------------
        # CENTER: TEXT CONTENT
        # -------------------------------------------------
        MDBoxLayout:
            orientation: "vertical"
            spacing: "2dp"

            # CATEGORY
            MDLabel:
                text: root.article.get("category", "").upper()
                font_size: "10sp"
                bold: True
                theme_text_color: "Custom"
                text_color: 0.2, 0.45, 0.2, 1
                shorten: True

            # TITLE
            MDLabel:
                text: root.article.get("title", "")
                bold: True
                font_size: "13sp"
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                shorten: True
                max_lines: 2

            # DATE
            MDLabel:
                text: root.article.get("date", "")
                font_size: "11sp"
                theme_text_color: "Custom"
                text_color: 0.45, 0.45, 0.45, 1
                shorten: True

        # -------------------------------------------------
        # RIGHT: DELETE BUTTON
        # -------------------------------------------------
        MDBoxLayout:
            size_hint_x: None
            width: "44dp"
            pos_hint: {"center_y": 0.5}

            MDIconButton:
                icon: "delete"
                theme_icon_color: "Custom"
                icon_color: 0.8, 0, 0, 1
                pos_hint: {"center_y": 0.5}
                on_release: app.root.get_screen("admin_articles").confirm_delete(root.article.get("ArticleId"))



<admin_wellnesshub_gainweightScreen>:
    name: "admin_wellnesshub_gainweightsreen"
    id: admin_wellnesshub_gainweightsreen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 15

        # ------------------------------------
        # HEADER
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 10

            Image:

                source: "logo.png"
                size_hint: None, None
                pos_hint: {"right": 0.95, "center_y": 0.6}
                width: "50dp"
                height: "50dp"


            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                valign: "center"

        # ------------------------------------
        # ARTICLES / EXERCISES TOGGLE
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(40)
            pos_hint: {"center_x": 0.5}
            size_hint_x: None
            width: self.minimum_width

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminarticles()

                MDButtonText:
                    text: "Health Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminexercise()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

        # ------------------------------------
        # GOAL FILTER BUTTONS (MDButton)
        # ------------------------------------
        MDBoxLayout:
            id: goal_buttons
            orientation: "horizontal"
            spacing: dp(8)
            adaptive_height: True
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            MDButton:
                id: btn_lose_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_loseweight()

                MDButtonText:
                    text: "Lose\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"



            MDButton:
                id: btn_gain_weight
                style: "filled"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainweight()


                MDButtonText:
                    text: "Gain\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1


            MDButton:
                id: btn_keep_fit
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_keepfit()

                MDButtonText:
                    text: "Keep\nFit"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"

            MDButton:
                id: btn_gain_muscles
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainmuscles()

                MDButtonText:
                    text: "Gain\nMuscles"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"



        # ------------------------------------
        # CONTENT LIST (ADMIN VIEW)
        # ------------------------------------
        MDScrollView:
            do_scroll_x: False

            MDList:
                id: admin_wellness_container
                padding: [0, 0, 0, dp(100)]
                spacing: dp(12)

    # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:

                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping


<admin_wellnesshub_keepfitScreen>:
    name: "admin_wellnesshub_keepfitsreen"
    id: admin_wellnesshub_keepfitsreen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 15

        # ------------------------------------
        # HEADER
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 10

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"right": 0.95, "center_y": 0.6}
                width: "50dp"
                height: "50dp"


            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                valign: "center"

        # ------------------------------------
        # ARTICLES / EXERCISES TOGGLE
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(40)
            pos_hint: {"center_x": 0.5}
            size_hint_x: None
            width: self.minimum_width

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminarticles()

                MDButtonText:
                    text: "Health Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminexercise()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

        # ------------------------------------
        # GOAL FILTER BUTTONS (MDButton)
        # ------------------------------------
        MDBoxLayout:
            id: goal_buttons
            orientation: "horizontal"
            spacing: dp(8)
            adaptive_height: True
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            MDButton:
                id: btn_lose_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_loseweight()

                MDButtonText:
                    text: "Lose\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"



            MDButton:
                id: btn_gain_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainweight()


                MDButtonText:
                    text: "Gain\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"

            MDButton:
                id: btn_keep_fit
                style: "filled"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_keepfit()

                MDButtonText:
                    text: "Keep\nFit"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

            MDButton:
                id: btn_gain_muscles
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainmuscles()

                MDButtonText:
                    text: "Gain\nMuscles"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"



        # ------------------------------------
        # CONTENT LIST (ADMIN VIEW)
        # ------------------------------------
        MDScrollView:
            do_scroll_x: False

            MDList:
                id: admin_wellness_container
                padding: [0, 0, 0, dp(100)]
                spacing: dp(12)

        # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:

                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping

<admin_wellnesshub_gainmusclesScreen>:
    name: "admin_wellnesshub_gainmusclessreen"
    id: admin_wellnesshub_gainmusclessreen
    md_bg_color: (0.902, 0.902, 0.902, 1)

    MDBoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 15

        # ------------------------------------
        # HEADER
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "70dp"
            spacing: 10

            Image:
                source: "logo.png"
                size_hint: None, None
                pos_hint: {"right": 0.95, "center_y": 0.6}
                width: "50dp"
                height: "50dp"


            MDLabel:
                text: "Wellness Hub"
                font_style: "Headline"
                role: "small"
                bold: True
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1
                valign: "center"

        # ------------------------------------
        # ARTICLES / EXERCISES TOGGLE
        # ------------------------------------
        MDBoxLayout:
            orientation: "horizontal"
            spacing: dp(10)
            size_hint_y: None
            height: dp(40)
            pos_hint: {"center_x": 0.5}
            size_hint_x: None
            width: self.minimum_width

            MDButton:
                style: "tonal"
                radius: [20, 20, 20, 20]
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminarticles()

                MDButtonText:
                    text: "Health Articles"
                    theme_text_color: "Custom"
                    text_color: 0, 0.6, 0, 1

            MDButton:
                style: "filled"
                radius: [20, 20, 20, 20]
                md_bg_color: 0, 0.6, 0, 1
                on_release: root.go_to_adminexercise()

                MDButtonText:
                    text: "Exercises"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1

        # ------------------------------------
        # GOAL FILTER BUTTONS (MDButton)
        # ------------------------------------
        MDBoxLayout:
            id: goal_buttons
            orientation: "horizontal"
            spacing: dp(8)
            adaptive_height: True
            size_hint_x: None
            pos_hint: {"center_x": 0.5}
            width: self.minimum_width

            MDButton:
                id: btn_lose_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_loseweight()

                MDButtonText:
                    text: "Lose\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"



            MDButton:
                id: btn_gain_weight
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainweight()


                MDButtonText:
                    text: "Gain\nWeight"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"

            MDButton:
                id: btn_keep_fit
                style: "tonal"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_keepfit()

                MDButtonText:
                    text: "Keep\nFit"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"


            MDButton:
                id: btn_gain_muscles
                style: "filled"
                md_bg_color: 1, 1, 1, 1
                line_color: 0, 0.7, 0, 1
                radius: [18, 18, 18, 18]
                elevation: 0
                on_release: root.go_to_gainmuscles()

                MDButtonText:
                    text: "Gain\nMuscles"
                    font_style: "Body"
                    role: "small"
                    halign: "center"
                    valign: "center"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1


        # ------------------------------------
        # CONTENT LIST (ADMIN VIEW)
        # ------------------------------------
        MDScrollView:
            do_scroll_x: False

            MDList:
                id: admin_wellness_container
                padding: [0, 0, 0, dp(100)]
                spacing: dp(12)

        # ---------- BOTTOM NAV ----------
    MDBoxLayout:
        size_hint_y: None
        height: "90dp"
        padding: "12dp"

        MDCard:
            size_hint_x: 1
            height: "75dp"
            radius: [30, 30, 30, 30]
            md_bg_color: 1, 1, 1, 1
            style: "outlined"
            line_color: 0, 0.6, 0, 1
            stroke_width: 2
            elevation: 0

            FloatLayout:

                # ----- LEFT : WELLNESS HUB -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"x": 0.05, "center_y": 0.5}

                    MDIconButton:
                        icon: "spa"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "admin_wellnesshubsreen"

                    MDLabel:
                        text: "Wellness Hub"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1

                # ----- CENTER : HOME -----
                MDIconButton:
                    icon: "home"
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: 0, 0.6, 0, 1
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.root.current = "admin_dashboard_screen"

                # ----- RIGHT : MANAGE ACCOUNTS -----
                BoxLayout:
                    orientation: "vertical"
                    spacing: 4
                    size_hint: None, None
                    size: "120dp", "60dp"
                    pos_hint: {"right": 0.95, "center_y": 0.5}

                    MDIconButton:
                        icon: "account-group"
                        theme_icon_color: "Custom"
                        icon_color: 0, 0.6, 0, 1
                        pos_hint: {"center_x": 0.5}
                        on_release:
                            app.root.current = "manage_active_account_screen"

                    MDLabel:
                        text: "Manage Accounts"
                        halign: "center"
                        theme_font_size: "Custom"
                        font_size: "12sp"
                        theme_text_color: "Custom"
                        text_color: 0, 0.6, 0, 1
                        width: dp(120)          # ðŸ‘ˆ must match parent width
                        text_size: self.size   # ðŸ‘ˆ prevents wrapping

<AdminWorkoutProgramScreen>:
    name: "admin_workout_program"
    md_bg_color: (0.94, 0.94, 0.94, 1)

    FloatLayout:
        # ===== MAIN CONTENT =====
        MDBoxLayout:
            orientation: "vertical"
            padding: [dp(12), 0, dp(12), 0]
            spacing: dp(12)
            size_hint: 1, 1

            # ===== TOP HEADER =====
            FloatLayout:
                size_hint_y: None
                height: dp(56)

                # â¬… Back Arrow (LEFT)
                MDIconButton:
                    icon: "arrow-left"
                    theme_icon_color: "Custom"
                    icon_color: (0.2, 0.6, 0.2, 1)
                    pos_hint: {"x": 0, "center_y": 0.5}
                    on_release: app.root.current = "admin_wellnesshubsreen"

                # ðŸŸ¢ CENTER TITLE
                MDLabel:
                    text: "Exercise"
                    font_style: "Headline"
                    bold: True
                    theme_text_color: "Custom"
                    text_color: (0, 0, 0, 1)

                    size_hint: None, None
                    height: dp(36)
                    width: self.texture_size[0]   # ðŸ”¥ THIS is critical

                    pos_hint: {"center_x": 0.5, "center_y": 0.4}
                    halign: "center"
                    valign: "middle"
                    text_size: None, None

            # ===== SUB TITLES =====
            MDLabel:
                id: goal_title
                text: "Loss Weight"
                font_style: "Title"
                theme_text_color: "Custom"
                text_color: (0, 0, 0, 1)
                size_hint_y: None
                height: self.texture_size[1]

            MDLabel:
                id: level_details
                text: "Choose condition"
                font_style: "Body"
                theme_text_color: "Secondary"
                size_hint_y: None
                height: self.texture_size[1]

            # ===== TOGGLE BUTTONS =====
            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)
                size_hint_y: None
                height: dp(44)

                MDButton:
                    id: btn_normal
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: (0.2, 0.6, 0.2, 1)
                    on_release: root.show_normal()

                    MDButtonText:
                        id: txt_normal
                        text: "Without Condition"
                        theme_text_color: "Custom"
                        text_color: (1, 1, 1, 1)

                MDButton:
                    id: btn_condition
                    style: "filled"
                    theme_bg_color: "Custom"
                    md_bg_color: (0.85, 0.9, 0.8, 1)
                    on_release: root.show_condition()

                    MDButtonText:
                        id: txt_condition
                        text: "With Condition"
                        theme_text_color: "Custom"
                        text_color: (0.2, 0.6, 0.2, 1)

            # ===== CONTENT =====
            MDScrollView:
                do_scroll_x: False

                MDBoxLayout:
                    id: exercise_container
                    orientation: "vertical"
                    padding: [0, 0, 0, dp(100)]
                    spacing: dp(12)
                    size_hint_y: None
                    height: self.minimum_height

        MDIconButton:
            icon: "plus"
            theme_icon_color: "Custom"
            icon_color: (1, 1, 1, 1)
            md_bg_color: (0.2, 0.6, 0.2, 1)
            theme_bg_color: "Custom"
            size_hint: None, None
            size: dp(56), dp(56)
            radius: [28, 28, 28, 28]
            pos_hint: {"right": 0.95, "y": 0.05}
            on_release: root.open_add_exercise_dialog()

